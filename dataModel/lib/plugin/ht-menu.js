!function(g,Q){"use strict";function r(){return document}function b(g){return r().createElement(g)}function $(g,Q,n){g.style.setProperty(Q,n,S)}function X(g,Q){g.appendChild(Q)}var n,v=g.ht,d="innerHTML",u="className",S=null,I="px",j=v.Default,y=j.getInternal(),V="0",w=y.addEventListener,P=y.removeEventListener,A=j.isTouchable,K=j.isTouchEvent;y.addMethod(j,{menuLabelFont:(A?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),v.widget.Menu=function(g){var Q=this,n=Q._view=y.createView(null,Q),M=Q.$1g=new v.widget.ContextMenu,w=b("ul");M._r=!0,M._view[u]+=" ht-widget-dropdownmenu",n[u]="ht-widget-menu",w[u]="header",$(n,"margin",V),$(n,"padding",V),$(n,"background",j.menuBackground),$(n,"-webkit-user-select","none"),$(n,"-moz-user-select","none"),$(n,"user-select","none"),$(n,"text-align","left"),$(n,"border-bottom",j.menuSeparatorWidth+"px solid "+j.menuSeparatorColor),$(n,"cursor","default"),$(n,"overflow","auto"),$(n,"white-space","nowrap"),$(n,"font",j.menuLabelFont),$(n,"color",j.menuLabelColor),$(n,"box-sizing","border-box"),$(n,"-moz-box-sizing","border-box"),$(w,"list-style","none"),$(w,"margin",V),$(w,"padding",V),$(w,"display","inline-block"),X(n,w),Q.setItems(g),Q.$2g=function(g){Q.$3g(g)},Q.$4g=function(g){Q.$5g(g)},Q.$6g=function(g){Q.$7g(g)},Q.$8g=function(g){Q.$9g(g)},Q.$9b=function(g){Q.$10g(g)},Q._autoShow=!0,Q.setAutoShow(!1),M.afterHide=function(){Q.$11g()},M.afterShow=function(){Q.$12g()},P(r(),"keydown",M.$3b),Q.$3b=function(g){Q.$13g(g)},Q.invalidate()},g="Menu",n={_items:S,$14g:j.menuHoverBackground,$15g:j.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(g){var Q=this;if(Q.$21g=g,Q.setItems(Q._items),"largeicons"===g){for(var n=Q._view.querySelectorAll(".header-item"),M=0,w=0;w<n.length;w++)var v=n[w],M=Math.max(M,v.clientWidth);for(w=0;w<n.length;w++){v=n[w];$(v,"min-width",M+I)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(g){this.$22g=g;for(var Q=this._view.querySelectorAll(".header-item"),n=0;n<Q.length;n++){var M=Q[n];$(M,"margin-left",g+I),$(M,"margin-right",g+I)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(g){this.$23g=g;for(var Q=this._view.querySelectorAll(".header-item"),n=0;n<Q.length;n++){var M=Q[n];$(M,"margin-top",g+I),$(M,"margin-bottom",g+I)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(g){this.$24g=g,$(this._view,"text-align",g)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){!1===this._enableGlobalKey&&(w(r(),"keydown",this.$3b),this._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,P(r(),"keydown",this.$3b)},setHoverBackground:function(g){this.$14g=g},setHoverColor:function(g){this.$15g=g},setItems:function(g){var Q=this,n=Q._view,M=Q.$21g;if(Q._items=g,n.children[0][d]="",Q.$16g={},g&&g.length){for(var n=n.children[0],w=0,v=r().createDocumentFragment();w<g.length;w++){var I,j=g[w],y=b("li"),S=b("span");j.icon&&((I=b("canvas"))[u]="menu-item-icon","smallicons"===M?($(I,"height","1.2em"),$(I,"width","1.2em"),$(I,"vertical-align","middle")):($(I,"height","32px"),$(I,"width","32px"),$(I,"display","block"),$(I,"margin","0 auto")),I.$20g=j.icon,X(y,I)),y[u]="header-item",$(y,"display","inline-block"),$(y,"vertical-align","top"),$(y,"padding","0 1.2em"),$(y,"line-height","1.8em"),"largeicons"===M&&$(y,"text-align","center"),$(y,"background-color","rgba(0,0,0,0)"),y.setAttribute("data-index",w),Q.$16g[w]=j.items,S[d]=j.label,"iconsonly"!==M&&X(y,S),X(v,y)}X(n,v)}},showDropdownMenu:function(g){var Q,n=this,M=n.$16g[g],w=n.$1g,g=n._view.children[0].children[g],v=n.$17g;g&&g!==v&&(v&&n.hideDropdownMenu(),v=g.getBoundingClientRect(),Q=j.getWindowInfo(),n.$17g=g,w.setItems(M),w.show(v.left+Q.left,v.top+v.height+Q.top,!1))},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(g,Q){var n=this._items;return n&&0!==n.length?this.$1g.getItemByProperty(g,Q,n):S},$12g:function(){var g=this,Q=g.$17g;Q.style.background=g.$14g,Q.style.color=g.$15g,g._autoShow||w(r(),A?"touchstart":"mousedown",g.$9b)},$11g:function(){var g=this.$17g;g&&(g.style.background="",g.style.color="",this.$17g=S),P(r(),A?"touchstart":"mousedown",this.$9b)},$10g:function(g){var Q=this._view,n=this.$1g,M=Q.children[0];!r().body.contains(Q)||M.contains(g.target)||n._view.contains(g.target)||this.hideDropdownMenu()},$13g:function(g){var Q=this.$1g;r().body.contains(this._view)&&Q.$13b.$4b.call(Q.$13b,g,this._items)},setAutoShow:function(g){var Q=this,n=Q.$1g,M=Q._view;Q._autoShow!==g&&(Q._autoShow?(P(M,"mouseover",Q.$2g),P(M,"mouseout",Q.$4g),P(n._view,"mouseout",Q.$4g),A||(w(M,"mouseover",Q.$8g),w(M,"mouseout",Q.$8g)),w(M,A?"touchstart":"mousedown",Q.$6g)):(P(M,"mouseover",Q.$8g),P(M,"mouseout",Q.$8g),P(M,A?"touchstart":"mousedown",Q.$6g),P(r(),A?"touchstart":"mousedown",Q.$9b),A||(w(M,"mouseover",Q.$2g),w(M,"mouseout",Q.$4g),w(n._view,"mouseout",Q.$4g))),Q._autoShow=g)},$3g:function(g){var Q=this._view.children[0],n=g.target;if(Q!==n&&Q.contains(n)){for(;"header-item"!==n[u];)n=n.parentNode;this.showDropdownMenu(n.getAttribute("data-index"))}},$5g:function(g){var Q=this._view.children[0],n=this.$1g,M=g.target,g=g.relatedTarget;!Q.contains(M)&&!n._view.contains(M)||Q.contains(g)||n._view.contains(g)||this.hideDropdownMenu()},$7g:function(g){g.preventDefault();var Q=this,n=Q._view.children[0],M=Q.$1g,w=g.target;if(j.isLeftButton(g)&&n!==w&&n.contains(w))if(K(g)){for(;"header-item"!==w[u];)w=w.parentNode;var n=w.getAttribute("data-index"),M=Q.$1g,g=Q._view.children[0].children[n],v=Q.$17g;M.isShowing()&&Q.hideDropdownMenu(),g!==v&&Q.showDropdownMenu(n)}else if(M.isShowing())Q.hideDropdownMenu();else{for(;"header-item"!==w[u];)w=w.parentNode;Q.showDropdownMenu(w.getAttribute("data-index"))}},$9g:function(g){var Q=this,n=Q._view,M=Q.$1g,w=g.target;if(n.contains(w)){for(var v=n.querySelectorAll(".header-item"),I=S,j=0;j<v.length;j++){var y=v[j];y.style.background="",y.style.color="","mouseover"===g.type?y.contains(w)&&(I=y):"mouseout"===g.type&&M.isShowing()&&Q.$17g===y&&(I=y)}M.isShowing()&&(I=I||Q.$17g,Q.showDropdownMenu(I.getAttribute("data-index"))),I&&(I.style.background=Q.$14g,I.style.color=Q.$15g)}},getShowingMenuIndex:function(){var g=this.$17g;return g?g.getAttribute("data-index"):-1},addTo:function(g){var Q=this._view;X(g,Q),this.invalidate()},dispose:function(){var g=this,Q=g._view,n=g.$1g;Q&&(g._autoShow?(P(Q,"mouseover",g.$2g),P(Q,"mouseout",g.$4g),P(n._view,"mouseout",g.$4g)):(P(Q,"mouseover",g.$8g),P(Q,"mouseout",g.$8g),P(Q,A?"touchstart":"mousedown",g.$6g),P(r(),A?"touchstart":"mousedown",g.$9b)),P(r(),"keydown",g.$3b),n.dispose(),Q.parentNode&&Q.parentNode.removeChild(Q),g._view=g.$1g=g.$16g=g._items=g.$17g=g.$2g=g.$4g=g.$6g=g.$8g=g.$9b=g.$3b=S)},$19g:function(g,Q,n,M){g=y.initContext(g);y.translateAndScale(g,0,0,1),g.clearRect(0,0,n,M),j.drawStretchImage(g,j.getImage(Q),"fill",0,0,n,M),g.restore()},validateImpl:function(){for(var g=this._view.querySelectorAll(".menu-item-icon"),Q=0;Q<g.length;Q++){var n=g[Q],M=n.clientWidth,w=n.clientHeight;M&&w&&(y.setCanvas(n,M,w),this.$19g(n,j.getImage(n.$20g),M,w))}}},j.def(v.widget[g],Q,n)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);