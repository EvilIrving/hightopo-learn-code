!function(D,m){"use strict";function v(D){return M().createElement(D)}function a(){return v("canvas")}function $(D,m,v){D.style.setProperty(m,v,B7)}function r(D,m){D.appendChild(m)}function g(D,m){D.removeChild(m)}var C,n="position",B="absolute",W="px",i="left",J="right",y="top",S="bottom",U="display",A=ht.Default,Y=A.getInternal(),F=Math.floor,T=Math.ceil,q=Math.PI,B7=null,P=D.parseInt,M=function(){return document},u=(Y=A.getInternal()).addEventListener,d=Y.removeEventListener;ht.widget.RulerFrame=function(D){var v=this,C=v._view=Y.createView(null,v),m=v.$1k=a(),A=v.$2k=a(),g=v.$3k=a(),T=v.$4k=a();v._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},v._topRulerConfig={visible:!0},v._rightRulerConfig={visible:!1},v._bottomRulerConfig={visible:!1},v._leftRulerConfig={visible:!0},r(C,m),r(C,g),r(C,A),r(C,T),$(C,n,"relative"),$(C,"box-sizing","border-box"),$(C,"-moz-box-sizing","border-box"),$(m,n,B),$(A,n,B),$(g,n,B),$(T,n,B),v.$14k=function(D){v.$13k=1,v.iv()},v.$15k=function(D){var m;(v._topRulerConfig.guideVisible||v._rightRulerConfig.guideVisible||v._bottomRulerConfig.guideVisible||v._leftRulerConfig.guideVisible||v._defaultRulerConfig.guideVisible||(v._topRulerConfig.guideTipVisible||v._rightRulerConfig.guideTipVisible||v._bottomRulerConfig.guideTipVisible||v._leftRulerConfig.guideTipVisible||v._defaultRulerConfig.guideTipVisible)&&v._component)&&(m=C.getBoundingClientRect(),v.$16k={x:D.clientX-m.left,y:D.clientY-m.top},v.$5k())},v.setComponent(D)},D="RulerFrame",C={ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(D){var m,v=this,C=v._component,A=v.getView();A&&(v._component=D,v.fp("component",C,D),C&&(m=v.getComponentView(C),g(A,m),d(A,"mousemove",v.$15k),v.removeComponentPropertyChangeListener(C,v.$14k)),D&&(m=v.getComponentView(D),r(A,m),$(m,n,B),u(A,"mousemove",v.$15k),v.addComponentPropertyChangeListener(D,v.$14k)))},addComponentPropertyChangeListener:function(D,m){D&&D.mp&&D.mp(m)},removeComponentPropertyChangeListener:function(D,m){D&&D.ump&&D.ump(m)},getComponentHZoom:function(D){return D&&D.getZoom?D.getZoom():1},getComponentVZoom:function(D){return D&&D.getZoom?D.getZoom():1},getComponentViewRect:function(D){if(D&&D.getViewRect)return D.getViewRect()},getComponentView:function(D){return D&&D.getView?D.getView():D},invalidateComponent:function(D){D&&D.iv&&D.iv()},validateComponent:function(D){D&&D.validate&&D.validate()},$7k:function(D,m,v,C,A,g,T,a,r,n,B,M){var u,d,W,i,J;m.visible?(J=this._defaultRulerConfig,u=m[u="borderStyle"]||J[u],d=m[d="borderColor"]||J[d],W=m[W="borderWidth"]||J[W],i=(m.size!=B7?m:J).size,J=m[m="background"]||J[m],m=this.$6k(W,u,d,D,v,A,i+W,T,a,r,n,B,M),$(D,A,"0px"),g?Y.setCanvas(D,C-m,i):Y.setCanvas(D,i,C-m),$(D,"background",J),$(D,U,"block")):($(D,U,"none"),$(this.getComponentView(this._component),A,"0px"))},$6k:function(D,m,v,C,A,g,T,a,r,n,B,M,u){var d=0;return $(C,A,D+"px "+m+" "+v),$(this.getComponentView(this._component),g,T+W),a?($(C,r,n+W),d+=n):$(C,r,"0px"),B?($(C,M,u+W),d+=u):$(C,M,"0px"),d},validateImpl:function(){var D,m,v,C=this,A=C._component,g=C.$1k,T=C.$2k,a=C.$3k,r=C.$4k,n=C._view,B=C._defaultRulerConfig,M=C._topRulerConfig,u=C._rightRulerConfig,d=C._bottomRulerConfig,W=C._leftRulerConfig,B=B.size;n&&A&&(D=M.size!=B7?M.size:B,m=u.size!=B7?u.size:B,v=d.size!=B7?d.size:B,B=W.size!=B7?W.size:B,C.$7k(g,M,"border-bottom",n.offsetWidth,y,!0,W.visible,i,B,u.visible,J,m),C.$7k(T,u,"border-left",n.offsetHeight,J,!1,M.visible,y,D,d.visible,S,v),C.$7k(a,d,"border-top",n.offsetWidth,S,!0,W.visible,i,B,u.visible,J,m),C.$7k(r,W,"border-right",n.offsetHeight,i,!1,M.visible,y,D,d.visible,S,v),C.$13k?delete C.$13k:C.invalidateComponent(A),C.validateComponent(A),C.$5k())},$5k:function(){var c=this,D=c.$1k,m=c.$2k,v=c.$3k,C=c.$4k,A=c._topRulerConfig,g=c._rightRulerConfig,T=c._bottomRulerConfig,a=c._leftRulerConfig,r=c._defaultRulerConfig,n=c._component,B=c.getComponentViewRect(n),l=c.getComponentHZoom(n),o=c.getComponentVZoom(n),Y=B.x*l,F=Y+B.width*l,q=B.y*o,P=q+B.height*o,x=c._defaultRulerConfig.size,_="defaultMajorTickSpacing",L="maxPhysicalMajorTickSpacing",H="minPhysicalMajorTickSpacing",j="tickSpacingAdaptable",Q="majorTickTextFont",V="majorTickTextColor",G="majorTickColor",p="minorTickColor",h="guideVisible",s="guideTipVisible",k="guideTipBorderColor",N="guideTipTextColor",X="guideTipTextFont",w="guideTipBackground",R="guideColor",O="guideWidth",Z="minMajorTickSpacing",I=r[_],E=r[L],t=r[H],f=r[j],b=r[Q],K=r[V],z=r[G],D7=r[Z],m7=r[p],v7=r[h],C7=r[s],A7=r[k],g7=r[N],T7=r[X],a7=r[w],r7=r[R],n7=r[O];function M(D,m,v,C,A,g){var T,a,r,n,B,M,u,d,W,i,J,$,y,S,U,e;m.visible&&(D=D.getContext("2d"),T=m[_]||I,e=m[j]!=B7?m[j]:f,a=m[Q]||b,r=m[V]||K,n=m.size!=B7?m.size:x,B=m[G]||z,M=m[Z]||D7,u=m[p]||m7,d=m[h]!=B7?m[h]:v7,W=m[s]!=B7?m[s]:C7,i=m[k]!=B7?m[k]:A7,J=m[N]!=B7?m[N]:g7,$=m[X]!=B7?m[X]:T7,y=m[w]!=B7?m[w]:a7,S=m[R]||r7,U=m[O]||n7,e&&(T=c[g]=c.$8k(c[g]||T,m[L]||E,m[H]||t,C?l:o,M)),v.call(c,D,Y,q,F,P,n,C?l:o,T,a,r,A,B,u),e=c.$16k,(d||W)&&e&&(C?c.$9k(D,e.x,n,S,U,d,W,i,J,$,y):c.$10k(D,e.y,n,S,U,d,W,i,J,$,y,A)))}c._view&&n&&(M(D,A,c.$11k,!0,!1,"_currentTopMajorTickSpacing"),M(m,g,c.$12k,!1,!0,"_currentRightMajorTickSpacing"),M(v,T,c.$11k,!0,!0,"_currentBottomMajorTickSpacing"),M(C,a,c.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(D,m,v,C,A){return D*C<v?D=F(m/C/A)*A:m<D*C&&(D=T(v/C/A)*A),D},getHTipText:function(D){var m=this._component,v=0,C=this._view.getBoundingClientRect();return m.lp?v=P(m.lp({x:D.x+C.left,y:D.y}).x):v-=P(this.getComponentView(m).style.left)||0,v},$9k:function(D,m,v,C,A,g,T,a,r,n,B){var M=this._component,M=(D.save(),Y.translateAndScale(D,0,0,1),m-(P(this.getComponentView(M).style.left)||0));m=this.getHTipText(this.$16k),g&&(D.beginPath(),D.fillStyle=C,D.rect(M,0,A,v),D.fill()),T&&(D.beginPath(),D.textAlign="center",D.textBaseline="middle",D.font=n,g=D.measureText(m).width+6,D.fillStyle=B,D.rect(M-g/2,0,g,v),D.fill(),D.strokeStyle=a,D.stroke(),D.beginPath(),D.fillStyle=r,D.fillText(m,M,0+v/2)),D.restore()},getVTipText:function(D){var m=this._component,v=0,C=this._view.getBoundingClientRect();return m.lp?v=P(m.lp({x:D.x,y:D.y+C.top}).y):v-=P(this.getComponentView(m).style.top)||0,v},formatScaleText:function(D){return Math.round(D)},$10k:function(D,m,v,C,A,g,T,a,r,n,B,M){var u=this._component,d=(D.save(),Y.translateAndScale(D,0,0,1),v/2),u=m-(P(this.getComponentView(u).style.top)||0);m=this.getVTipText(this.$16k),g&&(D.beginPath(),D.fillStyle=C,D.rect(d-v/2,u,v,A),D.fill()),T&&(D.translate(d,u),D.rotate((M?90:-90)*q/180),D.translate(-d,-u),D.beginPath(),D.textAlign="center",D.textBaseline="middle",D.font=n,g=D.measureText(m).width+6,D.fillStyle=B,D.rect(d-g/2,u-v/2,g,v),D.fill(),D.strokeStyle=a,D.stroke(),D.fillStyle=r,D.fillText(m,d,u)),D.restore()},$11k:function(D,m,v,C,A,g,T,a,r,n,B,M,u){D.save();for(var d=m,W=(d+C)/2,i=(C=C-d,Y.translateAndScale(D,m=0,0,1),0),J=0,$=P(g/2),y=g-$,S=B?0:$,U=a*T,e=U/10,$=(D.clearRect(m-=U,0,(C+=U)-m,g),D.beginPath(),D.fillStyle=u,F(W/e)*e-d),i=$;i<C;i+=e)D.rect(i,0+S,1,y);for(i=$;m<i;i-=e)D.rect(i,0+S,1,y);for(D.fill(),S=B?0:1,D.beginPath(),D.fillStyle=M,i=$=F(W/U)*U-d;i<C;i+=U)D.rect(i,0+S,1,g-1);for(i=$;m<i;i-=U)D.rect(i,0+S,1,g-1);D.fill();u=(P(/\d+px/.exec(r)[0])||10)/2,D.textBaseline="middle",S=B?g-u-2:2+u,D.beginPath(),D.fillStyle=n,D.font=r,M=F(W/U)*U/T;for(i=$,J=M;i<C;i+=U,J+=a){var c=this.getHScaleText?this.getHScaleText(i):J;D.fillText(this.formatScaleText(c),i+2,0+S)}for(i=$,J=M;m<i;i-=U,J-=a){c=this.getHScaleText?this.getHScaleText(i):J;D.fillText(this.formatScaleText(c),i+2,0+S)}D.restore()},$12k:function(T,D,m,v,C,A,g,a,r,n,B,M,u){T.save();for(var d=m,W=(d+C)/2,i=(C=C-d,Y.translateAndScale(T,m=0,0,1),0),J=this,$=0,y=P(A/2),S=A-y,U=B?0:y,e=a*g,c=e/10,y=(T.clearRect(0,0,A,(C+=e)-(m-=e)),T.beginPath(),T.fillStyle=u,F(W/c)*c-d),i=y;i<C;i+=c)T.rect(0+U,i,S,1);for(i=y;m<i;i-=c)T.rect(0+U,i,S,1);for(T.fill(),U=B?0:1,T.beginPath(),T.fillStyle=M,i=y=F(W/e)*e-d;i<C;i+=e)T.rect(0+U,i,A-1,1);for(i=y;m<i;i-=e)T.rect(0+U,i,A-1,1);T.fill();var u=(P(/\d+px/.exec(r)[0])||10)/2,l=90*q/180;function o(D,m,v,C,A,g){A=J.getVScaleText?J.getVScaleText(v):A,A=J.formatScaleText(A),T.translate(D+m,v),T.rotate(-C),T.translate(-D-m,-v),T.fillText(A,D+m+(g?2:1),v),T.translate(D+m,v),T.rotate(C),T.translate(-D-m,-v)}T.textBaseline="middle",U=B?A-u:2+u,l=B?-l:l,T.beginPath(),T.fillStyle=n,T.font=r;M=F(W/e)*e/g;for(i=y,$=M;i<C;i+=e,$+=a)o(0,U,i,l,$,B);for(i=y,$=M;m<i;i-=e,$-=a)o(0,U,i,l,$,B);T.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var D=this,m=D._component,v=D._view;m&&D.removeComponentPropertyChangeListener(m,D.$14k),v&&(d(v,"mousemove",D.$15k),g(v.parentNode,v),D._view=null)}},A.def(ht.widget[D],m,C)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);