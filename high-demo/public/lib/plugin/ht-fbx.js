!function(O,Z6,h){"use strict";var g,$=O.ht,E=$.Default,W=E.getInternal(),V=(E.clone,E.def),z=($.WebGLVarants,$.Math.Matrix4),u=$.Math.Vector4,I=$.Math.Euler,Q=$.Math.Quaternion,A=$.Math.Vector3;function t(V){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(V);for(var j="",N=0,P=V.length;N<P;N++)j+=String.fromCharCode(V[N]);try{return decodeURIComponent(escape(j))}catch(V){return j}}function w(V,j,N){return j===h&&(j=0),N===h&&(N=V.byteLength),t(new Uint8Array(V,j,N))}function B(V){return V/46186158e3}function p(V){return V*Math.PI/180}var o=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];function _(V){return 6<=(V=V||0)?o[0]:o[V]}function X(V,j,N){(j=j[N])!==h&&(V[N]=j)}function a(V,j){if(S="Kaydara FBX Binary  \0",(N=V).byteLength>=S.length&&S===w(N,0,S.length))g=(new N5)._zS(V);else{N=w(V);if(!function(N){var V=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],P=0;for(var j=0;j<V.length;++j)if(function(V){var j=N[V-1];return N=N.slice(P+V),P++,j}(1)===V[j])return;return 1}(N))throw new Error("Unknown format.");if(U(N)<7e3)throw new Error("FBX version not supported, FileVersion: "+U(N));g=(new j5)._zS(N)}var N,v,P,O,n,S=(new v5)._zS(j),L={model3d:!0},Z=((V=S.materialMap)&&(v=L.matDef={},V.forEach(function(V){var j,N=V.name,P=v[N]={};for(j in V)"name"!==j&&"setValues"!==j&&(P[j]=V[j])})),b(L,S,j,{}),{}),y={},u=!1,I=(E.traverse(L,null,function(V){if(Z[V.name]){for(V.displayName=V.name;P=V.name+"_"+$.Math.generateIncreasingID(),Z[P];);V.name=P}Z[V.name]=V.ID,y[V.ID]=V.name,delete V.ID,"__undefined__"===V.mat&&(u=!0)},"comps"),u&&(L.matDef||(L.matDef={}),L.matDef.__undefined__||(L.matDef.__undefined__={type:(new k).type})),L.animations&&L.animations.forEach(function(V){V.tracks.forEach(function(V){var j=V.name.split(".");j[0]&&y[j[0]]&&(V.name=y[j[0]]+"."+j.slice(1).join("."))})}),E.traverse(L,null,function(V){var j=V.skeleton;if(j){for(var N=j[0],P=N.length,v=new Array(P),O=0;O<P;O++)v[O]=N[O].name;V.skeleton={bones:v,boneMatrixInverses:j[1],bindMatrix:j[2].toArray(),bindMatrixInverse:(new z).copy(j[2]).invert().toArray()}}},"comps"),E.traverse(L,null,function(V){var j=V.comps;if(j)for(var N=j.length-1;0<=N;N--){var P=j[N];P.mesh||P.isBone||P.comps&&P.comps.length||j.splice(N,1)}},"comps"),(j.center||j.cube)&&(O=new $.Math.Box3,n=new $.Math.Box3,E.traverse(S,function(V){var j=V.mesh;j&&j.attributes&&j.attributes.position&&(n.setFromArray(j.attributes.position.array),V.matrixWorld&&n.applyMatrix4(V.matrixWorld),O.expandByBox(n))},null,"_children"),W.completeCubeCenterOfModel3d(L,O,j.cube,j.center)),!1!==j.flipY&&E.traverse(L,function(V){V=V.mesh;if(V&&(V.uv||V.uv2)){for(var j=1,N=V.uv,P=N?N.length:0;j<P;j+=2)N[j]=1-N[j];for(j=1,P=(N=V.uv2)?N.length:0;j<P;j+=2)N[j]=1-N[j]}},null,"comps"),j.matDef);if(I)if(L.matDef)for(var Q in I)L.matDef[Q]=I[Q];else L.matDef=I;return j.shape3d&&E.setShape3dModel(j.shape3d,L),j.playAutomatically&&(L.playAutomatically=!0),L}function H(){this.add=function(V,j){this[V]=j}}var N,P,v,q,L,F={position:"vs",normal:"ns"},r=new z,e=(N=new A,P=new Q,v=new A,function(V,j){j.decompose(N,P,v),V.position=N.toArray(),V.quaternion=P.toArray(),V.scale=v.toArray()}),b=function(V,j,N,P){var v=j.mat;if(v)if(v instanceof Array){for(var O=[],n=0,S=v.length;n<S;n++)O.push(v[n].name);V.mat=O}else V.mat=v.name;var L=j.mesh;if(L){V.mesh=Z={},L.index&&(Z.is=L.index.array);var Z,y,u=L.attributes;for(y in u)Z[F[y]||y]=u[y].array;var L=L.groups;L&&(V.subMeshes=L),V.mat||(V.mat="__undefined__")}j.matrix.equals(r)||e(V,j.matrix),j.userData&&(L=j.userData.transformData)&&(L.rotationOffset||L.rotationPivot||L.scalingOffset||L.scalingPivot||2===L.inheritType)&&((g=V.transformData={}).inheritType=L.inheritType||2,g.translation=L.translation||[0,0,0],L.rotation?((Q=L.rotation.map(p)).push(L.eulerOrder),g.rotation=Q):g.rotation=[0,0,0,1],g.scale=L.scale||[1,1,1],X(g,L,"rotationOffset"),X(g,L,"rotationPivot"),X(g,L,"scalingOffset"),X(g,L,"scalingPivot"));j.isBone&&(V.isBone=!0),V.name=j.name,V.ID=j.ID;var I,Q=j.skeleton,g=(Q&&(V.skeleton=Q),j.animations),$=(g&&(V.animations=g),j.getChildren().getArray());if($){V.comps=[];for(n=0,S=$.length;n<S;n++)V.comps.push(I={}),b(I,$[n],N,P)}};function G(V,j){var N=V.duration,P=j.start,v=j.duration;P&&N<P||v&&N<v+(P||0)||(P&&(V.start=P),N!==(v=v||N-(P||0))&&(V.duration=v,V.rawDuration=N),j.default&&(V.default=!0),j.speed!==h&&(V.speed=j.speed),j.loop&&(V.loop=j.loop))}function K(V,j,N){var P,v,O,n=j.name;if(q[n]){do{if(L=j.sourceShortName+"#"+n,!q[L])break;if(j.sources&&j.sources.length&&(L+=j.sources.join("#")),!q[L])break;for(var n=L,S=1;L=n+"$"+S++,q[L];);}while(0);q[L]=!0,n=j.name=L}else q[n]=!0;if(N)for(P in(O=N[n])&&(O.invalid?j._toBeRemoved=!0:(O.name&&(j.rawName=n,j.name=O.name),G(j,O))),N)(O=N[P]).source!==n||q[P]||(q[P]=!0,(v=Z6.assign({},j)).name=P,v.source=n,v.rawDuration&&(v.duration=v.rawDuration,delete v.rawDuration),G(v,O),V.push(v))}W.addMethod(E,{loadFbx:function(P,v){(v=v||{}).responseType="arraybuffer",E.xhrLoad(P,function(V){var j,N;V=V,j=v.finishFunc,N=v.shape3d,(V=V?a(V,v):null)?j&&j(V,P,N):j&&j(null)},v)},parseFbx:a,completeFbxAnimation:function(V,j,N,P){q={},V=V;var v,O,n,S=V=0<=(n=(V=0<=(n=Math.max(V.lastIndexOf("\\"),V.lastIndexOf("/")))?V.slice(n+1):V).lastIndexOf("."))?V.slice(0,n):V,L=j.animations;if(L)for($=0,E=L.length;$<E;$++)(I=L[$]).duration&&I.tracks&&I.tracks.length?(I.sources=[],I.sourceShortName=S,K(L,I,N)):I._toBeRemoved=!0;if(P&&P.length)for(L=L||(j.animations=[]),$=0,E=P?P.length:0;$<E;$++){var Z,y=P[$];if(y&&(Z=y.animations)&&Z.length)for(v=0,O=Z.length;v<O;v++){var u=Z6.assign({},Z[v]);u.sources?(u.sources=u.sources.slice(0),u.sources.splice(0,0,$)):u.sources=[$],K(L,u,N),L.push(u)}}for(var I,Q=[],g=[],$=0,E=L.length;$<E;$++)(I=L[$])._toBeRemoved?g.push(I.rawName||I.name):Q.push(I);return Q.length!==L.length&&(j.animations=Q),g.length&&(j.invalidAnimationNames=g),j}});var m=new I,M=new A;function c(V){var j=new z,N=new z,P=new z,v=new z,O=new z,n=new z,S=new z,L=new z,Z=new z,y=new z,u=new z,I=new z,Q=V.inheritType||0,g=(V.translation&&j.setPosition(M.fromArray(V.translation)),V.preRotation&&((g=V.preRotation.map(p)).push(V.eulerOrder),N.makeRotationFromEuler(m.fromArray(g))),V.rotation&&((g=V.rotation.map(p)).push(V.eulerOrder),P.makeRotationFromEuler(m.fromArray(g))),V.postRotation&&((g=V.postRotation.map(p)).push(V.eulerOrder),v.makeRotationFromEuler(m.fromArray(g)),v.invert()),V.scale&&O.scale(M.fromArray(V.scale)),V.scalingOffset&&S.setPosition(M.fromArray(V.scalingOffset)),V.scalingPivot&&n.setPosition(M.fromArray(V.scalingPivot)),V.rotationOffset&&L.setPosition(M.fromArray(V.rotationOffset)),V.rotationPivot&&Z.setPosition(M.fromArray(V.rotationPivot)),V.parentMatrixWorld&&(u.copy(V.parentMatrix),y.copy(V.parentMatrixWorld)),N.clone().multiply(P).multiply(v)),V=new z,$=(V.extractRotation(y),new z),$=($.copyPosition(y),$.clone().invert().multiply(y)),$=V.clone().invert().multiply($),E=O,W=new z,$=(0===Q?W.copy(V).multiply(g).multiply($).multiply(E):1===Q?W.copy(V).multiply($).multiply(g).multiply(E):(Q=(new z).scale((new A).setFromMatrixScale(u)).clone().invert(),u=$.clone().multiply(Q),W.copy(V).multiply(g).multiply(u).multiply(E)),Z.clone().invert()),Q=n.clone().invert(),V=j.clone().multiply(L).multiply(Z).multiply(N).multiply(P).multiply(v).multiply($).multiply(S).multiply(n).multiply(O).multiply(Q),g=(new z).copyPosition(V),u=y.clone().multiply(g);return I.copyPosition(u),(V=I.clone().multiply(W)).premultiply(y.invert()),V}var D=[];function d(V,j,N,P){var v;switch(P.mappingType){case"ByPolygonVertex":v=V;break;case"ByPolygon":v=j;break;case"ByVertice":v=N;break;case"AllSame":v=P.indices[0];break;default:console.warn("unknown attribute mapping type "+P.mappingType)}for(var O=(v="IndexToDirect"===P.referenceType?P.indices[v]:v)*P.dataSize,n=O+P.dataSize,S=D,L=P.buffer,Z=n,y=O,u=0;y<Z;y++,u++)S[u]=L[y];return S}function f(V,j,N){return V.slice(0,j).concat(N).concat(V.slice(j))}var Y=new RegExp("[\\[\\]\\.:\\/]","g");function y(V){return V.replace(/\s/g,"_").replace(Y,"")}function U(V){V=V.match(/FBXVersion: (\d+)/);if(V)return parseInt(V[1]);throw new Error("Cannot find the version number for the file given.")}function x(V){return V.split(",").map(function(V){return parseFloat(V)})}function T(){this.userData={},this.matrix=new z,this.matrixWorld=new z,T.superClass.constructor.apply(this,arguments)}function J(V){for(var j in this.texture=!0,V)this[j]=V[j]}function n(V,j){this.mat=j,this.mesh=V,this.userData={},n.superClass.constructor.apply(this,arguments)}function V5(V,j){this.dv=new DataView(V),this.offset=0,this.littleEndian=j===h||j,this.getOffset=function(){return this.offset},this.size=function(){return this.dv.buffer.byteLength},this.skip=function(V){this.offset+=V},this._hS=function(){return 1==(1&this.getUint8())},this._iS=function(V){for(var j=[],N=0;N<V;N++)j.push(this._hS());return j},this.getUint8=function(){var V=this.dv.getUint8(this.offset);return this.offset+=1,V},this.getInt16=function(){var V=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,V},this.getInt32=function(){var V=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,V},this.getInt32Array=function(V){for(var j=[],N=0;N<V;N++)j.push(this.getInt32());return j},this.getUint32=function(){var V=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,V},this.getInt64=function(){var V,j;return this.littleEndian?(V=this.getUint32(),j=this.getUint32()):(j=this.getUint32(),V=this.getUint32()),2147483648&j?(j=4294967295&~j,-(4294967296*(j=4294967295===(V=4294967295&~V)?j+1&4294967295:j)+(V=V+1&4294967295))):4294967296*j+V},this.getInt64Array=function(V){for(var j=[],N=0;N<V;N++)j.push(this.getInt64());return j},this.getUint64=function(){var V,j;return this.littleEndian?(V=this.getUint32(),j=this.getUint32()):(j=this.getUint32(),V=this.getUint32()),4294967296*j+V},this.getFloat32=function(){var V=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,V},this.getFloat32Array=function(V){for(var j=[],N=0;N<V;N++)j.push(this.getFloat32());return j},this.getFloat64=function(){var V=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,V},this.getFloat64Array=function(V){for(var j=[],N=0;N<V;N++)j.push(this.getFloat64());return j},this._vS=function(V){var j=this.dv.buffer.slice(this.offset,this.offset+V);return this.offset+=V,j},this.getString=function(V){for(var j=[],N=0;N<V;N++)j[N]=this.getUint8();var P=j.indexOf(0);return 0<=P&&(j=j.slice(0,P)),t(new Uint8Array(j))}}function s(){this.uuid=$.Math.generateUUID(),this.name="",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null}V(T,$.Data,{add:function(V){this.addChild(V)},traverse:function(V){E.traverse(this,V)},applyMatrix4:function(V){this.matrix.premultiply(V),this.getParent()?this.matrixWorld.multiplyMatrices(this.getParent().matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix)}});var C,Z,k=function(){this.type="pbr",this.setValues=function(V){if(V){for(var j in V)this[j]=V[j];return this}},this.clone=function(){var V,j=new k;for(V in this)this[V]&&(j[V]=this[V]);return j}},j5=(V(n,T,{normalizeSkinWeights:function(){var V=new $.Math.Vector4,j=this.mesh.attributes.skinWeight;if(j)for(var N=0,P=j.count;N<P;N++){V.fromBufferAttribute(j,N);var v=1/V.manhattanLength();v!=1/0?V.multiplyScalar(v):V.set(1,0,0,0),j.setXYZW(N,V.x,V.y,V.z,V.w)}}}),function(){this._2S=function(){return this.nodeStack[this.currentIndent-2]},this._3S=function(){return this.nodeStack[this.currentIndent-1]},this._4S=function(){return this.currentProp},this._5S=function(V){this.nodeStack.push(V),this.currentIndent+=1},this._6S=function(){this.nodeStack.pop(),--this.currentIndent},this._7S=function(V,j){this.currentProp=V,this.currentPropName=j},this._zS=function(V){this.currentIndent=0,this.allNodes=new H,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var O=this,n=V.split(/[\r\n]+/);return n.forEach(function(V,j){var N,P=V.match(/^[\s\t]*;/),v=V.match(/^[\s\t]*$/);P||v||(P=V.match("^\\t{"+O.currentIndent+"}(\\w+):(.*){",""),v=V.match("^\\t{"+O.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),N=V.match("^\\t{"+(O.currentIndent-1)+"}}"),P?O._8S(V,P):v?O._aS(V,v,n[++j]):N?O._6S():V.match(/^[^\s\t}]/)&&O._bS(V))}),this.allNodes},this._8S=function(V,j){var N=j[1].trim().replace(/^"/,"").replace(/"$/,""),j=j[2].split(",").map(function(V){return V.trim().replace(/^"/,"").replace(/"$/,"")}),P={name:N},j=this._9S(j),v=this._3S();0===this.currentIndent?this.allNodes.add(N,P):N in v?("PoseNode"===N?v.PoseNode.push(P):v[N].id!==h&&(v[N]={},v[N][v[N].id]=v[N]),""!==j.id&&(v[N][j.id]=P)):"number"==typeof j.id?(v[N]={},v[N][j.id]=P):"Properties70"!==N&&(v[N]="PoseNode"===N?[P]:P),"number"==typeof j.id&&(P.id=j.id),""!==j.name&&(P.attrName=j.name),""!==j.type&&(P.attrType=j.type),this._5S(P)},this._9S=function(V){var j=V[0],N=(""!==V[0]&&(j=parseInt(V[0]),isNaN(j)&&(j=V[0])),""),P="";return 1<V.length&&(N=V[1].replace(/^(\w+)::/,""),P=V[2]),{id:j,name:N,type:P}},this._aS=function(V,j,N){var P=j[1].replace(/^"/,"").replace(/"$/,"").trim(),j=j[2].replace(/^"/,"").replace(/"$/,"").trim(),N=("Content"===P&&","===j&&(j=N.replace(/"/g,"").replace(/,$/,"").trim()),this._3S());if("Properties70"===N.name)this._cS(V,P,j);else{if("C"===P){for(var V=j.split(",").slice(1),v=parseInt(V[0]),V=parseInt(V[1]),O=(O=j.split(",").slice(3)).map(function(V){return V.trim().replace(/^"/,"")}),P="connections",n=j=[v,V],S=O,L=0,Z=n.length,y=S.length;L<y;L++,Z++)n[Z]=S[L];N[P]===h&&(N[P]=[])}"Node"===P&&(N.id=j),P in N&&Array.isArray(N[P])?N[P].push(j):"a"!==P?N[P]=j:N.a=j,this._7S(N,P),"a"===P&&","!==j.slice(-1)&&(N.a=x(j))}},this._bS=function(V){var j=this._3S();j.a+=V,","!==V.slice(-1)&&(j.a=x(j.a))},this._cS=function(V,j,N){var N=N.split('",').map(function(V){return V.trim().replace(/^\"/,"").replace(/\s/,"_")}),P=N[0],v=N[1],O=N[2],n=N[3],S=N[4];switch(v){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":S=parseFloat(S);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":S=x(S)}this._2S()[P]={type:v,type2:O,flag:n,value:S},this._7S(this._2S(),P)}}),N5=function(){this._zS=function(V){var j=new V5(V),N=(j.skip(23),j.getUint32());if(N<6400)throw new Error("FBX version not supported : "+N);for(var P=new H;!this._dS(j);){var v=this._eS(j,N);null!==v&&P.add(v.name,v)}return P},this._dS=function(V){return V.size()%16==0?(V.getOffset()+160+16&-16)>=V.size():V.getOffset()+160+16>=V.size()},this._eS=function(V,j){var N={},P=7500<=j?V.getUint64():V.getUint32(),v=7500<=j?V.getUint64():V.getUint32(),O=(7500<=j?V.getUint64():V.getUint32(),V.getUint8()),n=V.getString(O);if(0===P)return null;for(var S=[],L=0;L<v;L++)S.push(this._gS(V));var O=0<S.length?S[0]:"",Z=1<S.length?S[1]:"",y=2<S.length?S[2]:"";for(N.singleProperty=1===v&&V.getOffset()===P;P>V.getOffset();){var u=this._eS(V,j);null!==u&&this._fS(n,N,u)}return N.propertyList=S,"number"==typeof O&&(N.id=O),""!==Z&&(N.attrName=Z),""!==y&&(N.attrType=y),""!==n&&(N.name=n),N},this._fS=function(V,j,N){var P,v,O,n,S;!0===N.singleProperty?(v=N.propertyList[0],Array.isArray(v)?(j[N.name]=N).a=v:j[N.name]=v):"Connections"===V&&"C"===N.name?(P=[],N.propertyList.forEach(function(V,j){0!==j&&P.push(V)}),j.connections===h&&(j.connections=[]),j.connections.push(P)):"Properties70"===N.name?Z6.keys(N).forEach(function(V){j[V]=N[V]}):"Properties70"===V&&"P"===N.name?(v=N.propertyList[0],V=N.propertyList[1],O=N.propertyList[2],n=N.propertyList[3],0===v.indexOf("Lcl ")&&(v=v.replace("Lcl ","Lcl_")),S="Color"===(V=0===V.indexOf("Lcl ")?V.replace("Lcl ","Lcl_"):V)||"ColorRGB"===V||"Vector"===V||"Vector3D"===V||0===V.indexOf("Lcl_")?[N.propertyList[4],N.propertyList[5],N.propertyList[6]]:N.propertyList[4],j[v]={type:V,type2:O,flag:n,value:S}):j[N.name]===h?"number"==typeof N.id?(j[N.name]={},j[N.name][N.id]=N):j[N.name]=N:"PoseNode"===N.name?(Array.isArray(j[N.name])||(j[N.name]=[j[N.name]]),j[N.name].push(N)):j[N.name][N.id]===h&&(j[N.name][N.id]=N)},this._gS=function(V){var j=V.getString(1);switch(j){case"C":return V._hS();case"D":return V.getFloat64();case"F":return V.getFloat32();case"I":return V.getInt32();case"L":return V.getInt64();case"R":return P=V.getUint32(),V._vS(P);case"S":return P=V.getUint32(),V.getString(P);case"Y":return V.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var N=V.getUint32(),P=V.getUint32(),v=V.getUint32();if(0===P)switch(j){case"b":case"c":return V._iS(N);case"d":return V.getFloat64Array(N);case"f":return V.getFloat32Array(N);case"i":return V.getInt32Array(N);case"l":return V.getInt64Array(N)}void 0===P5&&console.error("Require External library fflate.min.js.");var P=P5.unzlibSync(new Uint8Array(V._vS(v))),O=new V5(P.buffer);switch(j){case"b":case"c":return O._iS(N);case"d":return O.getFloat64Array(N);case"f":return O.getFloat32Array(N);case"i":return O.getInt32Array(N);case"l":return O.getInt64Array(N)}default:throw new Error("Unknown property type "+j)}}},P5=function(){function Q(V,j){for(var N=new G(31),P=0;P<31;++P)N[P]=j+=1<<V[P-1];var v=new K(N[30]);for(P=1;P<30;++P)for(var O=N[P];O<N[P+1];++O)v[O]=O-N[P]<<5|P;return[N,v]}var V={},g=("undefined"!=typeof module&&"object"==typeof exports?function(V){var S;try{S=require("worker_threads").Worker}catch(S){}return exports.default=S?function(V,j,N,P,v){var O=!1,n=new S(V+";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global",{eval:!0}).on("error",function(V){return v(V,null)}).on("message",function(V){return v(null,V)}).on("exit",function(V){V&&!O&&v(Error("exited with code "+V),null)});return n._wS(N,P),n.terminate=function(){return O=!0,S.prototype.terminate.call(n)},n}:function(V,j,N,P,v){setImmediate(function(){return v(Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});function O(){}return{terminate:O,_wS:O}},V}:function(V){var O={},n=function(V){return URL.createObjectURL(new Blob([V],{type:"text/javascript"}))},S=function(V){return new Worker(V)};try{URL.revokeObjectURL(n(""))}catch(O){n=function(V){return"data:application/javascript;charset=UTF-8,"+encodeURI(V)},S=function(V){return new Worker(V,{type:"module"})}}return V.default=function(V,j,N,P,v){j=S(O[j]||(O[j]=n(V)));return j._yS=function(V){return v(V.error,null)},j._xS=function(V){return v(null,V.data)},j._wS(N,P),j},V})({}),b=Uint8Array,G=Uint16Array,K=Uint32Array,c=new b([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),D=new b([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new b([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j=Q(c,2),r=j[0],U=j[1];r[28]=258,U[258]=28;for(var j=Q(D,0),e=j[0],J=j[1],W=new G(32768),N=0;N<32768;++N){var P=(43690&N)>>>1|(21845&N)<<1;W[N]=((65280&(P=(61680&(P=(52428&P)>>>2|(13107&P)<<2))>>>4|(3855&P)<<4))>>>8|(255&P)<<8)>>>1}for(var _=function(V,j,N){for(var P=V.length,v=0,O=new G(j);v<P;++v)++O[V[v]-1];var n=new G(j);for(v=0;v<j;++v)n[v]=n[v-1]+O[v-1]<<1;if(N){for(var S=new G(1<<j),L=15-j,v=0;v<P;++v)if(V[v])for(var Z=v<<4|V[v],y=j-V[v],u=n[V[v]-1]++<<y,I=u|(1<<y)-1;u<=I;++u)S[W[u]>>>L]=Z}else for(S=new G(P),v=0;v<P;++v)V[v]&&(S[v]=W[n[V[v]-1]++]>>>15-V[v]);return S},t=new b(288),N=0;N<144;++N)t[N]=8;for(N=144;N<256;++N)t[N]=9;for(N=256;N<280;++N)t[N]=7;for(N=280;N<288;++N)t[N]=8;var w=new b(32);for(N=0;N<32;++N)w[N]=5;function V5(V){for(var j=V[0],N=1;N<V.length;++N)V[N]>j&&(j=V[N]);return j}function a(V,j,N){var P=j/8|0;return(V[P]|V[1+P]<<8)>>(7&j)&N}function j5(V,j){var N=j/8|0;return(V[N]|V[1+N]<<8|V[2+N]<<16)>>(7&j)}function z(j,V,N,P,v,O){var n=j.length,S=new b(P+n+5*(1+Math.ceil(n/7e3))+v),L=S.subarray(P,S.length-v),Z=0;if(!V||n<8)for(var y=0;y<=n;y+=65535){var u=y+65535;Z=u<n?Z5(L,Z,j.subarray(y,u)):(L[y]=O,Z5(L,Z,j.subarray(y,n)))}else{for(var V=u5[V-1],w=V>>>13,B=8191&V,I=(1<<N)-1,Q=new G(32768),g=new G(1+I),$=Math.ceil(N/3),o=2*$,E=function(V){return(j[V]^j[V+1]<<$^j[V+2]<<o)&I},W=new K(25e3),z=new G(288),A=new G(32),p=0,h=0,X=y=0,q=0,m=0;y<n;++y){var M=E(y),d=32767&y,x=g[M];if(Q[d]=x,g[M]=d,q<=y){var T=n-y;if((7e3<p||24576<X)&&423<T){Z=y5(j,L,0,W,z,A,h,X,m,y-m,Z),X=p=h=0,m=y;for(var s=0;s<286;++s)z[s]=0;for(s=0;s<30;++s)A[s]=0}var C=2,k=0,_=B,i=d-x&32767;if(2<T&&M==E(y-i))for(var a=Math.min(w,T)-1,H=Math.min(32767,y),F=Math.min(258,T);i<=H&&--_&&d!=x;){if(j[y+C]==j[y+C-i]){for(var R=0;R<F&&j[y+R]==j[y+R-i];++R);if(C<R){if(k=i,a<(C=R))break;var r=Math.min(i,R-2),l=0;for(s=0;s<r;++s){var t=y-i+s+32768&32767,e=t-Q[t]+32768&32767;l<e&&(l=e,x=t)}}}i+=(d=x)-(x=Q[d])+32768&32767}k?(W[X++]=268435456|U[C]<<18|J[k],M=31&U[C],T=31&J[k],h+=c[M]+D[T],++z[257+M],++A[T],q=y+C,++p):(W[X++]=j[y],++z[j[y]])}}Z=y5(j,L,O,W,z,A,h,X,m,y-m,Z),!O&&7&Z&&(Z=Z5(L,Z+1,Y))}return f(S,0,P+n5(Z)+v)}function v(){return[b,G,K,c,D,o,r,e,P5,O5,W,_,V5,a,j5,n5,f,C,$,n,s]}function O(){return[b,G,K,c,D,o,U,J,N5,t,v5,w,W,u5,Y,_,B,H,S5,k,L5,F,Z5,y5,n5,f,z,y,d5,n]}function A(){return[W5,p5,E,M,i]}function X(){return[z5,A5]}function q(){return[h5,E,R]}function m(){return[X5]}function n(V){return postMessage(V,[V.buffer])}function s(V){return V&&V.size&&new b(V.size)}function S(V,j,N,P,v,O){var n=$5(N,P,v,function(V,j){n.terminate(),O(V,j)});return n._wS([V,j],j.consume?[V.buffer]:[]),function(){n.terminate()}}function L(j){return j.ondata=function(V,j){return postMessage([V,j],[V.buffer])},function(V){return j.push(V.data[0],V.data[1])}}function Z(V,N,j,P,v){var O,n=$5(V,P,v,function(V,j){V?(n.terminate(),N.ondata.call(N,V)):(j[1]&&n.terminate(),N.ondata.call(N,V,j[0],j[1]))});n._wS(j),N.push=function(V,j){if(O)throw"stream finished";if(!N.ondata)throw"no stream handler";n._wS([V,O=j],[V.buffer])},N.terminate=function(){n.terminate()}}var N5=_(t,9,0),P5=_(t,9,1),v5=_(w,5,0),O5=_(w,5,1),n5=function(V){return(V/8|0)+(7&V&&1)},f=function(V,j,N){(null==j||j<0)&&(j=0),(null==N||N>V.length)&&(N=V.length);var P=new(V instanceof G?G:V instanceof K?K:b)(N-j);return P.set(V.subarray(j,N)),P},C=function(V,N,j){var P=V.length;if(!P||j&&!j.l&&P<5)return N||new b(0);function v(V){var j=N.length;j<V&&((j=new b(Math.max(2*j,V))).set(N),N=j)}var O=!N||j,n=!j||j.i,S=(j=j||{},N=N||new b(3*P),j.f||0),L=j.p||0,Z=j.b||0,y=j.l,u=j.d,I=j.m,Q=j.n,g=8*P;do{if(!y){j.f=S=a(V,L,1);var $=a(V,L+1,3);if(L+=3,!$){var E=V[(M=n5(L)+4)-4]|V[M-3]<<8,W=M+E;if(P<W){if(n)throw"unexpected EOF";break}O&&v(Z+E),N.set(V.subarray(M,W),Z),j.b=Z+=E,j.p=L=8*W;continue}if(1==$)y=P5,u=O5,I=9,Q=5;else{if(2!=$)throw"invalid block type";var E=a(V,L,31)+257,z=a(V,L+10,15)+4,A=E+a(V,L+5,31)+1;L+=14;for(var p=new b(A),h=new b(19),X=0;X<z;++X)h[o[X]]=a(V,L+3*X,7);L+=3*z;for(var W=V5(h),q=(1<<W)-1,m=_(h,W,1),X=0;X<A;){var M,d=m[a(V,L,q)];if(L+=15&d,(M=d>>>4)<16)p[X++]=M;else{var x=0,T=0;for(16==M?(T=3+a(V,L,3),L+=2,x=p[X-1]):17==M?(T=3+a(V,L,7),L+=3):18==M&&(T=11+a(V,L,127),L+=7);T--;)p[X++]=x}}var $=p.subarray(0,E),s=p.subarray(E),I=V5($),Q=V5(s),y=_($,I,1),u=_(s,Q,1)}if(g<L){if(n)throw"unexpected EOF";break}}O&&v(Z+131072);for(var w=(1<<I)-1,B=(1<<Q)-1,C=L;;C=L){var k=(x=y[j5(V,L)&w])>>>4;if((L+=15&x)>g){if(n)throw"unexpected EOF";break}if(!x)throw"invalid length/literal";if(k<256)N[Z++]=k;else{if(256==k){C=L,y=null;break}var i,R=k-254,k=(264<k&&(R=a(V,L,(1<<(i=c[X=k-257]))-1)+r[X],L+=i),u[j5(V,L)&B]),l=k>>>4;if(!k)throw"invalid distance";if(L+=15&k,s=e[l],3<l&&(i=D[l],s+=j5(V,L)&(1<<i)-1,L+=i),g<L){if(n)throw"unexpected EOF";break}O&&v(Z+131072);for(var t=Z+R;Z<t;Z+=4)N[Z]=N[Z-s],N[Z+1]=N[Z+1-s],N[Z+2]=N[Z+2-s],N[Z+3]=N[Z+3-s];Z=t}}j.l=y,j.p=C,j.b=Z,y&&(S=1,j.m=I,j.d=u,j.n=Q)}while(!S);return Z==N.length?N:f(N,0,Z)},B=function(V,j,N){var P=j/8|0;V[P]|=N<<=7&j,V[1+P]|=N>>>8},H=function(V,j,N){var P=j/8|0;V[P]|=N<<=7&j,V[1+P]|=N>>>8,V[2+P]|=N>>>16},S5=function(V,j){for(var N=[],P=0;P<V.length;++P)V[P]&&N.push({s:P,f:V[P]});var v=N.length,O=N.slice();if(!v)return[Y,0];if(1==v)return($=new b(N[0].s+1))[N[0].s]=1,[$,1];N.sort(function(V,j){return V.f-j.f}),N.push({s:-1,f:25001});var n=N[0],S=N[1],L=0,Z=1,y=2;for(N[0]={s:-1,f:n.f+S.f,l:n,r:S};Z!=v-1;)n=N[N[L].f<N[y].f?L++:y++],S=N[L!=Z&&N[L].f<N[y].f?L++:y++],N[Z++]={s:-1,f:n.f+S.f,l:n,r:S};var u=O[0].s;for(P=1;P<v;++P)O[P].s>u&&(u=O[P].s);var I=new G(u+1),Q=k(N[Z-1],I,0);if(j<Q){var P=0,g=0,$=Q-j,E=1<<$;for(O.sort(function(V,j){return I[j.s]-I[V.s]||V.f-j.f});P<v;++P){var W=O[P].s;if(!(I[W]>j))break;g+=E-(1<<Q-I[W]),I[W]=j}for(g>>>=$;0<g;){var z=O[P].s;I[z]<j?g-=1<<j-I[z]++-1:++P}for(;0<=P&&g;--P){var A=O[P].s;I[A]==j&&(--I[A],++g)}Q=j}return[new b(I),Q]},k=function(V,j,N){return-1==V.s?Math.max(k(V.l,j,N+1),k(V.r,j,N+1)):j[V.s]=N},L5=function(V){for(var j=V.length;j&&!V[--j];);for(var N=new G(++j),P=0,v=V[0],O=1,n=function(V){N[P++]=V},S=1;S<=j;++S)if(V[S]==v&&S!=j)++O;else{if(!v&&2<O){for(;138<O;O-=138)n(32754);2<O&&(n(10<O?O-11<<5|28690:O-3<<5|12305),O=0)}else if(3<O){for(n(v),--O;6<O;O-=6)n(8304);2<O&&(n(O-3<<5|8208),O=0)}for(;O--;)n(v);O=1,v=V[S]}return[N.subarray(0,P),j]},F=function(V,j){for(var N=0,P=0;P<j.length;++P)N+=V[P]*j[P];return N},Z5=function(V,j,N){var P=N.length,v=n5(j+2);V[v]=255&P,V[v+1]=P>>>8,V[v+2]=255^V[v],V[v+3]=255^V[v+1];for(var O=0;O<P;++O)V[v+O+4]=N[O];return 8*(v+4+P)},y5=function(V,j,N,P,v,O,n,S,L,Z,y){B(j,y++,N),++v[256];for(var N=S5(v,15),u=N[0],N=N[1],I=S5(O,15),Q=I[0],I=I[1],g=L5(u),$=g[0],g=g[1],E=L5(Q),W=E[0],E=E[1],z=new G(19),A=0;A<$.length;++A)z[31&$[A]]++;for(A=0;A<W.length;++A)z[31&W[A]]++;for(var p=S5(z,7),h=p[0],p=p[1],X=19;4<X&&!h[o[X-1]];--X);var q,m,M=Z+5<<3,d=F(v,t)+F(O,w)+n,v=F(v,u)+F(O,Q)+n+14+3*X+F(z,h)+(2*z[16]+3*z[17]+7*z[18]);if(M<=d&&M<=v)return Z5(j,y,V.subarray(L,L+Z));if(B(j,y,1+(v<d)),y+=2,v<d){var x=_(u,N,0),T=u,s=_(Q,I,0),C=Q,k=_(h,p,0);for(B(j,y,g-257),B(j,y+5,E-1),B(j,y+10,X-4),y+=14,A=0;A<X;++A)B(j,y+3*A,h[o[A]]);y+=3*X;for(var i=[$,W],R=0;R<2;++R)for(var l=i[R],A=0;A<l.length;++A)B(j,y,k[q=31&l[A]]),y+=h[q],15<q&&(B(j,y,l[A]>>>5&127),y+=l[A]>>>12)}else x=N5,T=t,s=v5,C=w;for(A=0;A<S;++A)255<P[A]?(H(j,y,x[257+(q=P[A]>>>18&31)]),y+=T[q+257],7<q&&(B(j,y,P[A]>>>23&31),y+=c[q]),m=31&P[A],H(j,y,s[m]),y+=C[m],3<m&&(H(j,y,P[A]>>>5&8191),y+=D[m])):(H(j,y,x[P[A]]),y+=T[P[A]]);return H(j,y,x[256]),y+T[256]},u5=new K([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y=new b(0),i=function(){for(var V=new K(256),j=0;j<256;++j){for(var N=j,P=9;--P;)N=(1&N&&3988292384)^N>>>1;V[j]=N}return V}(),M=function(){var P=-1;return{p:function(V){for(var j=P,N=0;N<V.length;++N)j=i[255&j^V[N]]^j>>>8;P=j},d:function(){return~P}}},R=function(){var n=1,S=0;return{p:function(V){for(var j=n,N=S,P=V.length,v=0;v!=P;){for(var O=Math.min(v+2655,P);v<O;++v)N+=j+=V[v];j=(65535&j)+15*(j>>16),N=(65535&N)+15*(N>>16)}n=j,S=N},d:function(){return(255&(n%=65521))<<24|n>>>8<<16|(255&(S%=65521))<<8|S>>>8}}},y=function(V,j,N,P,v){return z(V,null==j.level?6:j.level,null==j.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(V.length)))):12+j.mem,N,P,!v)},l=function(V,j){var N,P={};for(N in V)P[N]=V[N];for(N in j)P[N]=j[N];return P},I5=function(V,j,N){for(var P=V(),V=""+V,v=V.slice(V.indexOf("[")+1,V.lastIndexOf("]")).replace(/ /g,"").split(","),O=0;O<P.length;++O){var n=P[O],S=v[O];if("function"==typeof n){j+=";"+S+"=";var L=""+n;if(n.prototype)if(-1!=L.indexOf("[native code]")){var Z=L.indexOf(" ",8)+1;j+=L.slice(Z,L.indexOf("(",Z))}else for(var y in j+=L,n.prototype)j+=";"+S+".prototype."+y+"="+n.prototype[y];else j+=L}else N[S]=n}return[j,N]},Q5=[],g5=function(V){var j,N=[];for(j in V)(V[j]instanceof b||V[j]instanceof G||V[j]instanceof K)&&N.push((V[j]=new V[j].varructor(V[j])).buffer);return N},$5=function(V,j,N,P){var v;if(!Q5[N]){for(var O="",n={},S=V.length-1,L=0;L<S;++L)O=(v=I5(V[L],O,n))[0],n=v[1];Q5[N]=I5(V[S],O,n)}var Z=l({},Q5[N][1]);return g.default(Q5[N][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+j+"}",N,Z,g5(Z),P)},p=function(V,j){return V[j]|V[j+1]<<8},h=function(V,j){return(V[j]|V[j+1]<<8|V[j+2]<<16|V[j+3]<<24)>>>0},E5=function(V,j){return h(V,j)+4294967296*h(V,j+4)},E=function(V,j,N){for(;N;++j)V[j]=N,N>>>=8},W5=function(V,j){var N=j.filename;if(V[0]=31,V[1]=139,V[2]=8,V[8]=j.level<2?4:9==j.level?2:0,V[9]=3,0!=j.mtime&&E(V,4,Math.floor(new Date(j.mtime||Date.now())/1e3)),N){V[3]=8;for(var P=0;P<=N.length;++P)V[P+10]=N.charCodeAt(P)}},z5=function(V){if(31!=V[0]||139!=V[1]||8!=V[2])throw"invalid gzip data";var j=V[3],N=10;4&j&&(N+=V[10]|2+(V[11]<<8));for(var P=(j>>3&1)+(j>>4&1);0<P;P-=!V[N++]);return N+(2&j)},A5=function(V){var j=V.length;return(V[j-4]|V[j-3]<<8|V[j-2]<<16|V[j-1]<<24)>>>0},p5=function(V){return 10+(V.filename&&V.filename.length+1||0)},h5=function(V,j){j=j.level,j=0==j?0:j<6?1:9==j?3:2;V[0]=120,V[1]=j<<6|(j?32-2*j:1)},X5=function(V){if(8!=(15&V[0])||7<V[0]>>>4||(V[0]<<8|V[1])%31)throw"invalid zlib data";if(32&V[1])throw"invalid zlib data: preset dictionaries not supported"};function q5(V,j){return j||"function"!=typeof V||(j=V,V={}),this.ondata=j,V}var u=function(){function V(V,j){j||"function"!=typeof V||(j=V,V={}),this.ondata=j,this.o=V||{}}return V.prototype.p=function(V,j){this.ondata(y(V,this.o,0,0,!j),j)},V.prototype.push=function(V,j){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=j,this.p(V,j||!1)},V}(),m5=(V.Deflate=u,function(V,j){Z([O,function(){return[L,u]}],this,q5.call(this,V,j),function(V){V=new u(V.data);onmessage=L(V)},6)});function M5(V,j,N){if(N||(N=j,j={}),"function"!=typeof N)throw"no callback";return S(V,j,[O],function(V){return n(d5(V.data[0],V.data[1]))},0,N)}function d5(V,j){return y(V,j||{},0,0)}V.AsyncDeflate=m5,V.deflate=M5,V.deflateSync=d5;var I=function(){function V(V){this.s={},this.p=new b(0),this.ondata=V}return V.prototype.e=function(V){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var j=this.p.length,N=new b(j+V.length);N.set(this.p),N.set(V,j),this.p=N},V.prototype.c=function(V){this.d=this.s.i=V||!1;var V=this.s.b,j=C(this.p,this.o,this.s);this.ondata(f(j,V,this.s.b),this.d),this.o=f(j,this.s.b-32768),this.s.b=this.o.length,this.p=f(this.p,this.s.p/8|0),this.s.p&=7},V.prototype.push=function(V,j){this.e(V),this.c(j)},V}(),x5=(V.Inflate=I,function(V){this.ondata=V,Z([v,function(){return[L,I]}],this,0,function(){var V=new I;onmessage=L(V)},7)});function T5(V,j,N){if(N||(N=j,j={}),"function"!=typeof N)throw"no callback";return S(V,j,[v],function(V){return n($(V.data[0],s(V.data[1])))},1,N)}function $(V,j){return C(V,j)}V.AsyncInflate=x5,V.inflate=T5,V.inflateSync=$;var s5=function(){function V(V,j){this.c=M(),this.l=0,this.v=1,u.call(this,V,j)}return V.prototype.push=function(V,j){u.prototype.push.call(this,V,j)},V.prototype.p=function(V,j){this.c.p(V),this.l+=V.length;V=y(V,this.o,this.v&&p5(this.o),j&&8,!j);this.v&&(W5(V,this.o),this.v=0),j&&(E(V,V.length-8,this.c.d()),E(V,V.length-4,this.l)),this.ondata(V,j)},V}(),j=(V.Gzip=s5,V.Compress=s5,function(V,j){Z([O,A,function(){return[L,u,s5]}],this,q5.call(this,V,j),function(V){V=new s5(V.data);onmessage=L(V)},8)});function C5(V,j,N){if(N||(N=j,j={}),"function"!=typeof N)throw"no callback";return S(V,j,[O,A,function(){return[k5]}],function(V){return n(k5(V.data[0],V.data[1]))},2,N)}function k5(V,j){j=j||{};var N=M(),P=V.length,V=(N.p(V),y(V,j,p5(j),8)),v=V.length;return W5(V,j),E(V,v-8,N.d()),E(V,v-4,P),V}V.AsyncGzip=j,V.AsyncCompress=j,V.gzip=C5,V.compress=C5,V.gzipSync=k5,V.compressSync=k5;var i5=function(){function V(V){this.v=1,I.call(this,V)}return V.prototype.push=function(V,j){if(I.prototype.e.call(this,V),this.v){V=3<this.p.length?z5(this.p):4;if(V>=this.p.length&&!j)return;this.p=this.p.subarray(V),this.v=0}if(j){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}I.prototype.c.call(this,j)},V}(),R5=(V.Gunzip=i5,function(V){this.ondata=V,Z([v,X,function(){return[L,I,i5]}],this,0,function(){var V=new i5;onmessage=L(V)},9)});function l5(V,j,N){if(N||(N=j,j={}),"function"!=typeof N)throw"no callback";return S(V,j,[v,X,function(){return[t5]}],function(V){return n(t5(V.data[0]))},3,N)}function t5(V,j){return C(V.subarray(z5(V),-8),j||new b(A5(V)))}V.AsyncGunzip=R5,V.gunzip=l5,V.gunzipSync=t5;var w5=function(){function V(V,j){this.c=R(),this.v=1,u.call(this,V,j)}return V.prototype.push=function(V,j){u.prototype.push.call(this,V,j)},V.prototype.p=function(V,j){this.c.p(V);V=y(V,this.o,this.v&&2,j&&4,!j);this.v&&(h5(V,this.o),this.v=0),j&&E(V,V.length-4,this.c.d()),this.ondata(V,j)},V}(),j=(V.Zlib=w5,function(V,j){Z([O,q,function(){return[L,u,w5]}],this,q5.call(this,V,j),function(V){V=new w5(V.data);onmessage=L(V)},10)});function B5(V,j,N){if(N||(N=j,j={}),"function"!=typeof N)throw"no callback";return S(V,j,[O,q,function(){return[o5]}],function(V){return n(o5(V.data[0],V.data[1]))},4,N)}function o5(V,j){j=j||{};var N=R(),V=(N.p(V),y(V,j,2,4));return h5(V,j),E(V,V.length-4,N.d()),V}V.AsyncZlib=j,V.zlib=B5,V.zlibSync=o5;var _5=function(){function V(V){this.v=1,I.call(this,V)}return V.prototype.push=function(V,j){if(I.prototype.e.call(this,V),this.v){if(this.p.length<2&&!j)return;this.p=this.p.subarray(2),this.v=0}if(j){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}I.prototype.c.call(this,j)},V}(),a5=(V.Unzlib=_5,function(V){this.ondata=V,Z([v,m,function(){return[L,I,_5]}],this,0,function(){var V=new _5;onmessage=L(V)},11)});function H5(V,j,N){if(N||(N=j,j={}),"function"!=typeof N)throw"no callback";return S(V,j,[v,m,function(){return[F5]}],function(V){return n(F5(V.data[0],s(V.data[1])))},5,N)}function F5(V,j){return C((X5(V),V.subarray(2,-4)),j)}V.AsyncUnzlib=a5,V.unzlib=H5,V.unzlibSync=F5;var r5=function(){function V(V){this.G=i5,this.I=I,this.Z=_5,this.ondata=V}return V.prototype.push=function(V,j){if(!this.ondata)throw"no stream handler";var N,P;this.s?this.s.push(V,j):(this.p&&this.p.length?((N=new b(this.p.length+V.length)).set(this.p),N.set(V,this.p.length)):this.p=V,2<this.p.length&&((P=this).s=new(31==this.p[0]&&139==this.p[1]&&8==this.p[2]?this.G:8!=(15&this.p[0])||7<this.p[0]>>4||(this.p[0]<<8|this.p[1])%31?this.I:this.Z)(function(){P.ondata.apply(P,arguments)}),this.s.push(this.p,j),this.p=null))},V}(),j=(V.Decompress=r5,function(){function V(V){this.G=R5,this.I=x5,this.Z=a5,this.ondata=V}return V.prototype.push=function(V,j){r5.prototype.push.call(this,V,j)},V}());function e5(V,j,N){if(N||(N=j,j={}),"function"!=typeof N)throw"no callback";return(31==V[0]&&139==V[1]&&8==V[2]?l5:8!=(15&V[0])||7<V[0]>>4||(V[0]<<8|V[1])%31?T5:H5)(V,j,N)}function b5(V,j){return(31==V[0]&&139==V[1]&&8==V[2]?t5:8!=(15&V[0])||7<V[0]>>4||(V[0]<<8|V[1])%31?$:F5)(V,j)}V.AsyncDecompress=j,V.decompress=e5,V.decompressSync=b5;var G5=function(V,j,N,P){for(var v in V){var O=V[v],v=j+v;O instanceof b?N[v]=[O,P]:Array.isArray(O)?N[v]=[O[0],l(P,O[1])]:G5(O,v+"/",N,P)}},K5="undefined"!=typeof TextEncoder&&new TextEncoder,c5="undefined"!=typeof TextDecoder&&new TextDecoder,D5=0;try{c5.decode(Y,{stream:!0}),D5=1}catch(g){}function f5(V){for(var j="",N=0;;){var P=V[N++],v=(127<P)+(223<P)+(239<P);if(N+v>V.length)return[j,f(V,N-1)];v?3==v?(P=((15&P)<<18|(63&V[N++])<<12|(63&V[N++])<<6|63&V[N++])-65536,j+=String.fromCharCode(55296|P>>10,56320|1023&P)):j+=String.fromCharCode(1&v?(31&P)<<6|63&V[N++]:(15&P)<<12|(63&V[N++])<<6|63&V[N++]):j+=String.fromCharCode(P)}}j=function(){function V(V){this.ondata=V,D5?this.t=new TextDecoder:this.p=Y}return V.prototype.push=function(V,j){if(!this.ondata)throw"no callback";if(j=!!j,this.t){if(this.ondata(this.t.decode(V,{stream:!0}),j),j){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var N=new b(this.p.length+V.length),V=(N.set(this.p),N.set(V,this.p.length),f5(N)),N=V[0],V=V[1];if(j){if(V.length)throw"invalid utf-8 data";this.p=null}else this.p=V;this.ondata(N,j)}},V}(),V.DecodeUTF8=j,j=function(){function V(V){this.ondata=V}return V.prototype.push=function(V,j){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(d(V),this.d=j||!1)},V}();function d(V,j){if(j){for(var N=new b(V.length),P=0;P<V.length;++P)N[P]=V.charCodeAt(P);return N}if(K5)return K5.encode(V);for(var v=V.length,O=new b(V.length+(V.length>>1)),n=0,S=function(V){O[n++]=V},P=0;P<v;++P){n+5>O.length&&((L=new b(n+8+(v-P<<1))).set(O),O=L);var L=V.charCodeAt(P);L<128||j?S(L):(L<2048?S(192|L>>6):(55295<L&&L<57344?(S(240|(L=65536+(1047552&L)|1023&V.charCodeAt(++P))>>18),S(128|L>>12&63)):S(224|L>>12),S(128|L>>6&63)),S(128|63&L))}return f(O,0,n)}function Y5(V,j){if(j){for(var N="",P=0;P<V.length;P+=16384)N+=String.fromCharCode.apply(null,V.subarray(P,P+16384));return N}if(c5)return c5.decode(V);j=f5(V);if(j[1].length)throw"invalid utf-8 data";return j[0]}V.EncodeUTF8=j,V.strToU8=d,V.strFromU8=Y5;function U5(V){return 1==V?3:V<6?2:9==V?1:0}function J5(V,j){return j+30+p(V,j+26)+p(V,j+28)}function V6(V,j,N){var P=p(V,j+28),v=Y5(V.subarray(j+46,j+46+P),!(2048&p(V,j+8))),P=j+46+P,O=h(V,j+20),N=N&&4294967295==O?N6(V,P):[O,h(V,j+24),h(V,j+42)],O=N[0],n=N[1],N=N[2];return[p(V,j+10),O,n,v,P+p(V,j+30)+p(V,j+32),N]}function x(V){var j=0;if(V)for(var N in V){N=V[N].length;if(65535<N)throw"extra field too long";j+=N+4}return j}function T(V,j,N,P,v,O,n,S){var L=P.length,Z=N.extra,y=S&&S.length,u=x(Z),v=(E(V,j,null!=n?33639248:67324752),j+=4,null!=n&&(V[j++]=20,V[j++]=N.os),V[j]=20,j+=2,V[j++]=N.flag<<1|(null==O&&8),V[j++]=v&&8,V[j++]=255&N.compression,V[j++]=N.compression>>8,new Date(null==N.mtime?Date.now():N.mtime)),I=v.getFullYear()-1980;if(I<0||119<I)throw"date not in range 1980-2099";if(E(V,j,I<<25|v.getMonth()+1<<21|v.getDate()<<16|v.getHours()<<11|v.getMinutes()<<5|v.getSeconds()>>>1),j+=4,null!=O&&(E(V,j,N.crc),E(V,j+4,O),E(V,j+8,N.size)),E(V,j+12,L),E(V,j+14,u),j+=16,null!=n&&(E(V,j,y),E(V,j+6,N.attrs),E(V,j+10,n),j+=14),V.set(P,j),j+=L,u)for(var Q in Z){var g=Z[Q],$=g.length;E(V,j,+Q),E(V,j+2,$),V.set(g,j+4),j+=4+$}y&&(V.set(S,j),j+=y)}function j6(V,j,N,P,v){E(V,j,101010256),E(V,j+8,N),E(V,j+10,N),E(V,j+12,P),E(V,j+16,v)}var N6=function(V,j){for(;1!=p(V,j);j+=4+p(V,j+2));return[E5(V,j+12),E5(V,j+4),E5(V,j+20)]},P6=function(){function V(V){this.filename=V,this.c=M(),this.size=0,this.compression=0}return V.prototype.process=function(V,j){this.ondata(null,V,j)},V.prototype.push=function(V,j){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(V),this.size+=V.length,j&&(this.crc=this.c.d()),this.process(V,j||!1)},V}(),j=(V.ZipPassThrough=P6,function(){function V(V,j){var N=this;j=j||{},P6.call(this,V),this.d=new u(j,function(V,j){N.ondata(null,V,j)}),this.compression=8,this.flag=U5(j.level)}return V.prototype.process=function(V,j){try{this.d.push(V,j)}catch(V){this.ondata(V,null,j)}},V.prototype.push=function(V,j){P6.prototype.push.call(this,V,j)},V}()),j=(V.ZipDeflate=j,function(){function V(V,j){var P=this;j=j||{},P6.call(this,V),this.d=new m5(j,function(V,j,N){P.ondata(V,j,N)}),this.compression=8,this.flag=U5(j.level),this.terminate=this.d.terminate}return V.prototype.process=function(V,j){this.d.push(V,j)},V.prototype.push=function(V,j){P6.prototype.push.call(this,V,j)},V}()),j=(V.AsyncZipDeflate=j,function(){function V(V){this.ondata=V,this.u=[],this.d=1}return V.prototype.add=function(P){var v=this;if(2&this.d)throw"stream finished";var V=d(P.filename),j=V.length,N=P.comment,O=N&&d(N),N=j!=P.filename.length||O&&N.length!=O.length,n=j+x(P.extra)+30;if(65535<j)throw"filename too long";function S(){for(var V=0,j=L;V<j.length;V++)v.ondata(null,j[V],!1);L=[]}var j=new b(n),L=(T(j,0,P,V,N),[j]),Z=this.d,y=(this.d=0,this.u.length),u=l(P,{f:V,u:N,o:O,t:function(){P.terminate&&P.terminate()},r:function(){var V;S(),Z&&((V=v.u[y+1])?V.r():v.d=1),Z=1}}),I=0;P.ondata=function(V,j,N){V?(v.ondata(V,j,N),v.terminate()):(I+=j.length,L.push(j),N?(V=new b(16),E(V,0,134695760),E(V,4,P.crc),E(V,8,I),E(V,12,P.size),L.push(V),u.c=I,u.b=n+I+16,u.crc=P.crc,u.size=P.size,Z&&u.r(),Z=1):Z&&S())},this.u.push(u)},V.prototype.end=function(){var V=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&V.d&&(V.u.splice(-1,1),V.e())},t:function(){}}),this.d=3},V.prototype.e=function(){for(var V=0,j=0,N=0,P=0,v=this.u;P<v.length;P++)N+=46+(O=v[P]).f.length+x(O.extra)+(O.o?O.o.length:0);for(var O,n=new b(N+22),S=0,L=this.u;S<L.length;S++)T(n,V,O=L[S],O.f,O.u,O.c,j,O.o),V+=46+O.f.length+x(O.extra)+(O.o?O.o.length:0),j+=O.b;j6(n,V,this.u.length,N,j),this.ondata(null,n,!0),this.d=2},V.prototype.terminate=function(){for(var V=0,j=this.u;V<j.length;V++)j[V].t();this.d=2},V}());function v6(V,j,$){if($||($=j,j={}),"function"!=typeof $)throw"no callback";function E(){for(var V=0;V<m.length;++V)m[V]()}function W(){for(var V=new b(X+22),j=h,N=X-h,P=X=0;P<L;++P){var v=q[P];try{var O=v.c.length,n=(T(V,X,v,v.f,v.u,O),30+v.f.length+x(v.extra)),S=X+n;V.set(v.c,S),T(V,h,v,v.f,v.u,O,X,v.m),h+=16+n+(v.m?v.m.length:0),X=S+O}catch(V){return $(V,null)}}j6(V,h,q.length,N,j),$(null,V)}var z={},A=(G5(V,"",z,j),Z6.keys(z)),p=A.length,h=0,X=0,L=p,q=Array(p),m=[];p||W();for(var N=0;N<L;++N)!function(N){function V(V,j){V?(E(),$(V,null)):(V=j.length,q[N]=l(O,{size:S,crc:n.d(),c:j,f:L,m:u,u:Z!=P.length||u&&y.length!=I,compression:g}),h+=30+Z+Q+V,X+=76+2*(Z+Q)+(I||0)+V,--p||W())}var P=A[N],j=z[P],v=j[0],O=j[1],n=M(),S=v.length,L=(n.p(v),d(P)),Z=L.length,y=O.comment,u=y&&d(y),I=u&&u.length,Q=x(O.extra),g=0==O.level?0:8;if(65535<Z&&V("filename too long",null),g)if(S<16e4)try{V(null,d5(v,O))}catch(N){V(N,null)}else m.push(M5(v,O,V));else V(null,v)}(N);return E}function O6(V,j){var N,P={},v=[],O=(G5(V,"",P,j=j||{}),0),n=0;for(N in P){var S=P[N],L=S[0],S=S[1],Z=0==S.level?0:8,y=(p=d(N)).length,u=S.comment,I=u&&d(u),Q=I&&I.length,g=x(S.extra);if(65535<y)throw"filename too long";var $=Z?d5(L,S):L,E=$.length,W=M();W.p(L),v.push(l(S,{size:L.length,crc:W.d(),c:$,f:p,m:I,u:y!=N.length||I&&u.length!=Q,o:O,compression:Z})),O+=30+y+g+E,n+=76+2*(y+g)+(Q||0)+E}for(var z=new b(n+22),V=O,j=n-O,A=0;A<v.length;++A){T(z,(p=v[A]).o,p,p.f,p.u,p.c.length);var p,h=30+p.f.length+x(p.extra);z.set(p.c,p.o+h),T(z,O,p,p.f,p.u,p.c.length,p.o,p.m),O+=16+h+(p.m?p.m.length:0)}return j6(z,O,v.length,j,V),z}V.Zip=j,V.zip=v6,V.zipSync=O6;var n6=function(){function V(){}return V.prototype.push=function(V,j){this.ondata(null,V,j)},V.compression=0,V}(),j=(V.UnzipPassThrough=n6,function(){function V(){var N=this;this.i=new I(function(V,j){N.ondata(null,V,j)})}return V.prototype.push=function(j,N){try{this.i.push(j,N)}catch(V){this.ondata(V,j,N)}},V.compression=8,V}()),j=(V.UnzipInflate=j,function(){function V(V,j){var P=this;j<32e4?this.i=new I(function(V,j){P.ondata(null,V,j)}):(this.i=new x5(function(V,j,N){P.ondata(V,j,N)}),this.terminate=this.i.terminate)}return V.prototype.push=function(V,j){this.i.terminate&&(V=f(V,0)),this.i.push(V,j)},V.compression=8,V}()),j=(V.AsyncUnzipInflate=j,function(){function V(V){this.onfile=V,this.k=[],this.o={0:n6},this.p=Y}return V.prototype.push=function(V,j){var I=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(0<this.c){var N=Math.min(this.c,V.length),P=V.subarray(0,N);if(this.c-=N,this.d?this.d.push(P,!this.c):this.k[0].push(P),(V=V.subarray(N)).length)return this.push(V,j)}else{var Q=0,g=0,$=void 0,E=void 0;this.p.length?V.length?((E=new b(this.p.length+V.length)).set(this.p),E.set(V,this.p.length)):E=this.p:E=V;for(var W=E.length,z=this.c,P=z&&this.d,A=this;g<W-4&&"break"!==function(){var P,V,j,N,v,O,n,S,L,Z,y,u=h(E,g);return 67324752==u?(Q=1,$=g,A.d=null,A.c=0,j=p(E,g+6),P=p(E,g+8),V=2048&j,j=8&j,N=p(E,g+26),v=p(E,g+28),g+30+N+v<W&&(A.k.unshift(O=[]),Q=2,S=h(E,g+18),L=h(E,g+22),Z=Y5(E.subarray(g+30,g+=30+N),!V),4294967295==S?(N=j?[-2]:N6(E,g),S=N[0],L=N[1]):j&&(S=-1),g+=v,A.c=S,y={name:Z,compression:P,start:function(){if(!y.ondata)throw"no callback";if(S){var V=I.o[P];if(!V)throw"unknown compression type "+P;(n=S<0?new V(Z):new V(Z,S,L)).ondata=function(V,j,N){y.ondata(V,j,N)};for(var j=0,N=O;j<N.length;j++)n.push(N[j],!1);I.k[0]==O&&I.c?I.d=n:n.push(Y,!0)}else y.ondata(null,Y,!0)},terminate:function(){n&&n.terminate&&n.terminate()}},0<=S&&(y.size=S,y.originalSize=L),A.onfile(y)),"break"):z?134695760==u?($=g+=12+(-2==z&&8),Q=3,A.c=0,"break"):33639248==u?($=g-=4,Q=3,A.c=0,"break"):void 0:void 0}();++g);if(this.p=Y,z<0&&(N=E.subarray(0,Q?$-12-(-2==z&&8)-(134695760==h(E,$-16)&&4):g),P?P.push(N,!!Q):this.k[+(2==Q)].push(N)),2&Q)return this.push(E.subarray(g),j);this.p=E.subarray(g)}if(j){if(this.c)throw"invalid zip file";this.p=null}},V.prototype.register=function(V){this.o[V.compression]=V},V}());function S6(S,L){if("function"!=typeof L)throw"no callback";for(var Z=[],y=function(){for(var V=0;V<Z.length;++V)Z[V]()},u={},V=S.length-22;101010256!=h(S,V);--V)if(!V||65558<S.length-V)return void L("invalid zip file",null);var I=p(S,V+8),j=(I||L(null,{}),I),Q=h(S,V+16),g=4294967295==Q;if(g){if(V=h(S,V-12),101075792!=h(S,V))return void L("invalid zip file",null);j=I=h(S,V+32),Q=h(S,V+48)}for(var N=0;N<j;++N)!function(){function j(V,j){V?(y(),L(V,null)):(u[O]=j,--I||L(null,u))}var V=V6(S,Q,g),N=V[0],P=V[1],v=V[2],O=V[3],n=V[4],V=J5(S,V[5]);Q=n;if(N)if(8==N){n=S.subarray(V,V+P);if(P<32e4)try{j(null,$(n,new b(v)))}catch(V){j(V,null)}else Z.push(T5(n,{size:v},j))}else j("unknown compression type "+N,null);else j(null,f(S,V,V+P))}();return y}function L6(V){for(var j={},N=V.length-22;101010256!=h(V,N);--N)if(!N||65558<V.length-N)throw"invalid zip file";var P=p(V,N+8);if(!P)return{};var v=4294967295==(I=h(V,N+16));if(v){if(N=h(V,N-12),101075792!=h(V,N))throw"invalid zip file";P=h(V,N+32),I=h(V,N+48)}for(var O=0;O<P;++O){var n=V6(V,I,v),S=n[0],L=n[1],Z=n[2],y=n[3],u=n[4],n=J5(V,n[5]),I=u;if(S){if(8!=S)throw"unknown compression type "+S;j[y]=$(V.subarray(n,n+L),new b(Z))}else j[y]=f(V,n,n+L)}return j}return V.Unzip=j,V.unzip=S6,V.unzipSync=L6,V}(),v5=function(V,j){this.textureLoader=V,this.manager=j},O5=(V(v5,Z6,{_zS:function(V){C=this._AS();var j=this._BS(),j=this._CS(j),j=this._DS(j),N=this._ES(),P=(new I5)._zS(N);return this._FS(N,P,j,V),Z},_AS:function(){var v=new Map;return"Connections"in g&&g.Connections.connections.forEach(function(V){var j=V[0],N=V[1],V=V[2],P=(v.has(j)||v.set(j,{parents:[],children:[]}),{ID:N,relationship:V}),P=(v.get(j).parents.push(P),v.has(N)||v.set(N,{parents:[],children:[]}),{ID:j,relationship:V});v.get(N).children.push(P)}),v},_BS:function(){var V={},j={};if("Video"in g.Objects){var N,P=g.Objects.Video;for(N in P){var v,O,n,S=P[N];V[v=parseInt(N)]=S.RelativeFilename||S.Filename,"Content"in S&&(n=S.Content instanceof ArrayBuffer&&0<S.Content.byteLength,O="string"==typeof S.Content&&""!==S.Content,(n||O)&&(n=this._lS(P[N]),j[S.RelativeFilename||S.Filename]=n))}}for(v in V){var L=V[v];j[L]!==h?V[v]=j[L]:V[v]=V[v].split("\\").pop()}return V},_lS:function(V){var j,N=V.Content,P=V.RelativeFilename||V.Filename,v=P.slice(P.lastIndexOf(".")+1).toLowerCase();switch(v){case"bmp":j="image/bmp";break;case"jpg":case"jpeg":j="image/jpeg";break;case"png":j="image/png";break;case"tif":j="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",P),j="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+v+'" is not supported.')}return"string"==typeof N?"data:"+j+";base64,"+N:(V=new Uint8Array(N),O.URL.createObjectURL(new Blob([V],{type:j})))},_CS:function(V){var j=new Map;if("Texture"in g.Objects){var N,P=g.Objects.Texture;for(N in P){var v=this.parseTexture(P[N],V);j.set(parseInt(N),v)}}return j},parseTexture:function(V,j){},_GS:function(V,j){var N,P=this.textureLoader.path,v=C.get(V.id).children,j=(v!==h&&0<v.length&&j[v[0].ID]!==h&&(0!==(N=j[v[0].ID]).indexOf("blob:")&&0!==N.indexOf("data:")||this.textureLoader.setPath(h)),V.FileName.slice(-3).toLowerCase());return v="tga"===j?null===(v=this.manager.getHandler(".tga"))?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",V.RelativeFilename),new J):(v.setPath(this.textureLoader.path),v.load(N)):"psd"===j?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",V.RelativeFilename),new J):this.textureLoader.load(N),this.textureLoader.setPath(P),v},_DS:function(V){var j=new Map;if("Material"in g.Objects){var N,P=g.Objects.Material;for(N in P){var v=this._kS(P[N],V);null!==v&&j.set(parseInt(N),v)}}return j},_kS:function(V,j){var N=V.id,P=V.attrName,v=V.ShadingModel;if("object"==typeof v&&v.value,!C.has(N))return null;v=this._gS(V,j,N),V=new k;return V.setValues(v),V.name=P,V},_gS:function(V,j,N){var P={},v=(V.BumpFactor&&(P.bumpScale=V.BumpFactor.value),V.Diffuse?P.diffuse=V.Diffuse.value:!V.DiffuseColor||"Color"!==V.DiffuseColor.type&&"ColorRGB"!==V.DiffuseColor.type||(P.diffuse=V.DiffuseColor.value),V.DisplacementFactor&&(P.displacementScale=V.DisplacementFactor.value),V.Emissive?P.emissive=V.Emissive.value:!V.EmissiveColor||"Color"!==V.EmissiveColor.type&&"ColorRGB"!==V.EmissiveColor.type||(P.emissive=V.EmissiveColor.value),V.EmissiveFactor&&(P.emissiveIntensity=parseFloat(V.EmissiveFactor.value)),V.Opacity&&(P.opacity=parseFloat(V.Opacity.value)),P.opacity<1&&(P.transparent=!0),V.ReflectionFactor&&(P.envMapIntensity=V.ReflectionFactor.value),V.Shininess&&(P.shininess=V.Shininess.value),V.Specular?P.specular=V.Specular.value:V.SpecularColor&&"Color"===V.SpecularColor.type&&(P.specular=V.SpecularColor.value),this);return C.get(N).children.forEach(function(V){switch(V.relationship){case"Bump":P.bumpMap=v._HS(j,V.ID);break;case"Maya|TEX_ao_map":P.aoMap=v._HS(j,V.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":P.map=v._HS(j,V.ID),P.map!==h&&(P.map.encoding=sRGBEncoding);break;case"DisplacementColor":P.displacementMap=v._HS(j,V.ID);break;case"EmissiveColor":P.emissiveMap=v._HS(j,V.ID),P.emissiveMap!==h&&(P.emissiveMap.encoding=sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":P.normalMap=v._HS(j,V.ID);break;case"ReflectionColor":P.envMap=v._HS(j,V.ID),P.envMap!==h&&(P.envMap.mapping=EquirectangularReflectionMapping,P.envMap.encoding=sRGBEncoding);break;case"SpecularColor":P.specularMap=v._HS(j,V.ID),P.specularMap!==h&&(P.specularMap.encoding=sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":P.alphaMap=v._HS(j,V.ID),P.transparent=!0}}),P},_HS:function(V,j){return"LayeredTexture"in g.Objects&&j in g.Objects.LayeredTexture&&(console.warn("layered textures are not supported."),j=C.get(j).children[0].ID),V.get(j)},_ES:function(){var V={},j={};if("Deformer"in g.Objects){var N,P=g.Objects.Deformer;for(N in P){var v,O=P[N],n=C.get(parseInt(N));"Skin"===O.attrType?((v=this._mS(n,P)).ID=N,1<n.parents.length&&console.warn("skeleton attached to more than one geometry is not supported."),v.geometryID=n.parents[0].ID,V[N]=v):"BlendShape"===O.attrType&&((v={id:N}).rawTargets=this._nS(n,P),v.id=N,1<n.parents.length&&console.warn("morph target attached to more than one geometry is not supported."),j[N]=v)}}return{skeletons:V,morphTargets:j}},_mS:function(V,N){var P=[];return V.children.forEach(function(V){var j=N[V.ID];"Cluster"===j.attrType&&(V={ID:V.ID,indices:[],weights:[],transformLink:(new z).fromArray(j.TransformLink.a)},"Indexes"in j&&(V.indices=j.Indexes.a,V.weights=j.Weights.a),P.push(V))}),{rawBones:P,bones:[]}},_nS:function(V,j){for(var N=[],P=0;P<V.children.length;P++){var v=V.children[P],O=j[v.ID],n={name:O.attrName,initialWeight:O.DeformPercent,id:O.id,fullWeights:O.FullWeights.a};if("BlendShapeChannel"!==O.attrType)return;n.geoID=C.get(parseInt(v.ID)).children.filter(function(V){return V.relationship===h})[0].ID,N.push(n)}return N},_FS:function(V,j,N,P){Z=new T;var v=this._oS(V.skeletons,j,N),O=g.Objects.Model,n=this;v.forEach(function(j){var V=O[j.ID];n._IS(j,V),C.get(j.ID).parents.forEach(function(V){V=v.get(V.ID);V!==h&&V.add(j)}),null==j.getParent()&&Z.add(j)}),this._JS(V.skeletons,j,v),Z.traverse(function(V){var j,N=V.userData.transformData;N&&((j=V.getParent())&&(N.parentMatrix=j.matrix,N.parentMatrixWorld=j.matrixWorld),j=c(N),V.applyMatrix4(j))}),Z.materialMap=N,Z.animations=(new Q5)._zS(P)},_oS:function(V,j,N){var P,v=new Map,O=g.Objects.Model;for(P in O){var n=parseInt(P),S=O[P],L=C.get(n),Z=this._pS(L,V,n,S.attrName);Z||((Z="Mesh"===S.attrType?this._sS(L,j,N):new T).name=S.attrName?y(S.attrName):"",S.uid||(S.uid=$.Math.generateIncreasingID()),Z.uid=S.uid,Z.ID=n),this._uS(Z,S),v.set(n,Z)}return v},_pS:function(V,j,v,O){var n=null;return V.parents.forEach(function(N){for(var V in j){var P=j[V];P.rawBones.forEach(function(V,j){V.ID===N.ID&&((n=new T).isBone=!0,n.matrixWorld.copy(V.transformLink),n.name=O?y(O):"",n.ID=v,P.bones[j]=n)})}}),n},_rS:function(V){var j,N;if(V.children.forEach(function(V){V=g.Objects.NodeAttribute[V.ID];V!==h&&(N=V)}),N===h)j=new Object3D;else{var V=N.LightType===h?0:N.LightType.value,P=16777215,v=(N.Color!==h&&(P=(new Color).fromArray(N.Color.value)),N.Intensity===h?1:N.Intensity.value/100),O=(N.CastLightOnObject!==h&&0===N.CastLightOnObject.value&&(v=0),0);N.FarAttenuationEnd!==h&&(O=N.EnableFarAttenuation!==h&&0===N.EnableFarAttenuation.value?0:N.FarAttenuationEnd.value);switch(V){case 0:j=new PointLight(P,v,O,1);break;case 1:j=new DirectionalLight(P,v);break;case 2:var n=Math.PI/3,S=(N.InnerAngle!==h&&(n=p(N.InnerAngle.value)),0);N.OuterAngle!==h&&(S=p(N.OuterAngle.value),S=Math.max(S,1)),j=new SpotLight(P,v,O,n,S,1);break;default:console.warn("Unknown light type "+N.LightType.value+", defaulting to a PointLight."),j=new PointLight(P,v)}N.CastShadows!==h&&1===N.CastShadows.value&&(j.castShadow=!0)}return j},_sS:function(V,j,N){var P=null,v=null,O=[];return V.children.forEach(function(V){j.has(V.ID)&&(P=j.get(V.ID)),N.has(V.ID)&&O.push(N.get(V.ID))}),v=1<O.length?O:1==O.length?O[0]:((V=N.has(-1))||(V=(new k).setValues({name:"__missing__"}),N.set(-1,V)),V),P.FBX_Deformer,(V=new n(P,v)).normalizeSkinWeights(),V},_tS:function(V,j){},_uS:function(V,j){var N={};"InheritType"in j&&(N.inheritType=parseInt(j.InheritType.value)),"RotationOrder"in j?N.eulerOrder=_(j.RotationOrder.value):N.eulerOrder="ZYX","Lcl_Translation"in j&&(N.translation=j.Lcl_Translation.value),"PreRotation"in j&&(N.preRotation=j.PreRotation.value),"Lcl_Rotation"in j&&(N.rotation=j.Lcl_Rotation.value),"PostRotation"in j&&(N.postRotation=j.PostRotation.value),"Lcl_Scaling"in j&&(N.scale=j.Lcl_Scaling.value),"ScalingOffset"in j&&(N.scalingOffset=j.ScalingOffset.value),"ScalingPivot"in j&&(N.scalingPivot=j.ScalingPivot.value),"RotationOffset"in j&&(N.rotationOffset=j.RotationOffset.value),"RotationPivot"in j&&(N.rotationPivot=j.RotationPivot.value),V.userData.transformData=N},_IS:function(j,V){"LookAtProperty"in V&&C.get(j.ID).children.forEach(function(V){"LookAtProperty"===V.relationship&&"Lcl_Translation"in(V=g.Objects.Model[V.ID])&&(V=V.Lcl_Translation.value,j.target!==h?(j.target.position.fromArray(V),Z.add(j.target)):j.lookAt((new A).fromArray(V)))})},_JS:function(V,j,N){var P,v=this._KS();for(P in V){var O=V[P];C.get(parseInt(O.ID)).parents.forEach(function(V){j.has(V.ID)&&(V=V.ID,C.get(V).parents.forEach(function(V){N.has(V.ID)&&(N.get(V.ID).skeleton=[O.bones,function(V){for(var j=[],N=new z,P=0,v=V.length;P<v;P++)N.copy(V[P].matrixWorld).invert().toArray(j,16*P);return j}(O.bones),v[V.ID]||new z])}))})}},_KS:function(){var j={};if("Pose"in g.Objects){var V,N,P=g.Objects.Pose;for(V in P)"BindPose"===P[V].attrType&&(N=P[V].PoseNode,Array.isArray(N)?N.forEach(function(V){j[V.Node]=(new z).fromArray(V.Matrix.a)}):j[N.Node]=(new z).fromArray(N.Matrix.a))}return j},_LS:function(){var V,j,N;"GlobalSettings"in g&&"AmbientColor"in g.GlobalSettings&&(N=(j=g.GlobalSettings.AmbientColor.value)[0],V=j[1],j=j[2],0===N&&0===V&&0===j||(N=new Color(N,V,j),Z.add(new AmbientLight(N,1))))}}),new $.Math.Matrix4);function S(V,j,N){this.name="",this.array=V,this.itemSize=j,this.count=V!==h?V.length/j:0,this.normalized=!0===N,this.usage=$.WebGLConstants.STATIC_DRAW,this.updateRange={offset:0,count:-1},this.version=0}V(s,Z6,{_3s:function(V){return Array.isArray(V)?this.index=new(65535<arrayMax(V)?j:R)(V,1):this.index=V,this},_4s:function(V,j){return this.attributes[V]=j,this},_5s:function(V){return delete this.attributes[V],this},_6s:function(V){return this.attributes[V]!==h},applyMatrix4:function(V){var j=this.attributes.position,j=(j!==h&&(j.applyMatrix4(V),j.needsUpdate=!0),this.attributes.normal),N=(j!==h&&(N=(new $.Math.Matrix3).getNormalMatrix(V),j.applyNormalMatrix(N),j.needsUpdate=!0),this.attributes.tangent);return N!==h&&(N.transformDirection(V),N.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},applyQuaternion:function(V){return O5.makeRotationFromQuaternion(V),this.applyMatrix4(O5),this},_MS:function(V,j,N){this.groups.push({start:V,count:j,materialIndex:N||0})},setFromPoints:function(V){for(var j=[],N=0,P=V.length;N<P;N++){var v=V[N];j.push(v.x,v.y,v.z||0)}return this._4s("position",new l(j,3)),this}}),Z6.defineProperty(S.prototype,"needsUpdate",{set:function(V){!0===V&&this.version++}});var i=new A;function n5(V,j,N){S.call(this,new Int8Array(V),j,N)}function S5(V,j,N){S.call(this,new Uint8Array(V),j,N)}function L5(V,j,N){S.call(this,new Uint8ClampedArray(V),j,N)}function Z5(V,j,N){S.call(this,new Int16Array(V),j,N)}function R(V,j,N){S.call(this,new Uint16Array(V),j,N)}function y5(V,j,N){S.call(this,new Int32Array(V),j,N)}function j(V,j,N){S.call(this,new Uint32Array(V),j,N)}function l(V,j,N){S.call(this,new Float32Array(V),j,N)}function u5(V,j,N){S.call(this,new Float64Array(V),j,N)}Z6.assign(S.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(V){return this.usage=V,this},copy:function(V){return this.name=V.name,this.array=new V.array.constructor(V.array),this.itemSize=V.itemSize,this.count=V.count,this.normalized=V.normalized,this.usage=V.usage,this},_8s:function(V,j,N){V*=this.itemSize,N*=j.itemSize;for(var P=0,v=this.itemSize;P<v;P++)this.array[V+P]=j.array[N+P];return this},_9s:function(V){return this.array.set(V),this},copyColorsArray:function(V){for(var j=this.array,N=0,P=0,v=V.length;P<v;P++){var O=V[P];O===h?(j[N++]=1,j[N++]=1,j[N++]=1):(j[N++]=O.r,j[N++]=O.g,j[N++]=O.b)}return this},_7s:function(V){for(var j=this.array,N=0,P=0,v=V.length;P<v;P++){var O=V[P];O===h&&(O=new Vector2),j[N++]=O.x,j[N++]=O.y}return this},_as:function(V){for(var j=this.array,N=0,P=0,v=V.length;P<v;P++){var O=V[P];O===h&&(O=new A),j[N++]=O.x,j[N++]=O.y,j[N++]=O.z}return this},_bs:function(V){for(var j=this.array,N=0,P=0,v=V.length;P<v;P++){var O=V[P];O===h&&(O=new u),j[N++]=O.x,j[N++]=O.y,j[N++]=O.z,j[N++]=O.w}return this},applyMatrix3:function(V){for(var j=0,N=this.count;j<N;j++)i.x=this.getX(j),i.y=this.getY(j),i.z=this.getZ(j),i.applyMatrix3(V),this.setXYZ(j,i.x,i.y,i.z);return this},applyMatrix4:function(V){for(var j=0,N=this.count;j<N;j++)i.x=this.getX(j),i.y=this.getY(j),i.z=this.getZ(j),i.applyMatrix4(V),this.setXYZ(j,i.x,i.y,i.z);return this},applyNormalMatrix:function(V){for(var j=0,N=this.count;j<N;j++)i.x=this.getX(j),i.y=this.getY(j),i.z=this.getZ(j),i.applyNormalMatrix(V),this.setXYZ(j,i.x,i.y,i.z);return this},transformDirection:function(V){for(var j=0,N=this.count;j<N;j++)i.x=this.getX(j),i.y=this.getY(j),i.z=this.getZ(j),i.transformDirection(V),this.setXYZ(j,i.x,i.y,i.z);return this},set:function(V,j){return this.array.set(V,j=j===h?0:j),this},getX:function(V){return this.array[V*this.itemSize]},setX:function(V,j){return this.array[V*this.itemSize]=j,this},getY:function(V){return this.array[V*this.itemSize+1]},setY:function(V,j){return this.array[V*this.itemSize+1]=j,this},getZ:function(V){return this.array[V*this.itemSize+2]},setZ:function(V,j){return this.array[V*this.itemSize+2]=j,this},getW:function(V){return this.array[V*this.itemSize+3]},setW:function(V,j){return this.array[V*this.itemSize+3]=j,this},setXY:function(V,j,N){return V*=this.itemSize,this.array[V+0]=j,this.array[V+1]=N,this},setXYZ:function(V,j,N,P){return V*=this.itemSize,this.array[V+0]=j,this.array[V+1]=N,this.array[V+2]=P,this},setXYZW:function(V,j,N,P,v){return V*=this.itemSize,this.array[V+0]=j,this.array[V+1]=N,this.array[V+2]=P,this.array[V+3]=v,this},onUpload:function(V){return this.onUploadCallback=V,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(n5.prototype=Z6.create(S.prototype)).constructor=n5,(S5.prototype=Z6.create(S.prototype)).constructor=S5,(L5.prototype=Z6.create(S.prototype)).constructor=L5,(Z5.prototype=Z6.create(S.prototype)).constructor=Z5,R.prototype=Z6.create(S.prototype),R.prototype.constructor=R,(y5.prototype=Z6.create(S.prototype)).constructor=y5,j.prototype=Z6.create(S.prototype),j.prototype.constructor=j,(l.prototype=Z6.create(S.prototype)).constructor=l,(u5.prototype=Z6.create(S.prototype)).constructor=u5;var I5=function(){},Q5=(V(I5,Z6,{_zS:function(V){var j=new Map;if("Geometry"in g.Objects){var N,P=g.Objects.Geometry;for(N in P){var v=C.get(parseInt(N)),v=this._2s(v,P[N],V);j.set(parseInt(N),v)}}return j},_2s:function(V,j,N){switch(j.attrType){case"Mesh":return this._1s(V,j,N);case"NurbsCurve":return this._PS(j)}},_1s:function(V,j,N){var P,v=N.skeletons,O=[],n=V.parents.map(function(V){return g.Objects.Model[V.ID]});if(0!==n.length)return P=V.children.reduce(function(V,j){return V=v[j.ID]!==h?v[j.ID]:V},null),V.children.forEach(function(V){N.morphTargets[V.ID]!==h&&O.push(N.morphTargets[V.ID])}),V=n[0],n={},"RotationOrder"in V&&(n.eulerOrder=_(V.RotationOrder.value)),"InheritType"in V&&(n.inheritType=parseInt(V.InheritType.value)),"GeometricTranslation"in V&&(n.translation=V.GeometricTranslation.value),"GeometricRotation"in V&&(n.rotation=V.GeometricRotation.value),"GeometricScaling"in V&&(n.scale=V.GeometricScaling.value),V=c(n),this._ZS(j,P,O,V)},_ZS:function(V,j,N,P){var v,O,n=new s,S=(V.attrName&&(n.name=V.attrName),this._YS(V,j)),L=this._XS(S),Z=new l(L.vertex,3);return Z.applyMatrix4(P),n._4s("position",Z),0<L.colors.length&&n._4s("color",new l(L.colors,3)),j&&(n._4s("skinIndex",new R(L.weightsIndices,4)),n._4s("skinWeight",new l(L.vertexWeights,4)),n.FBX_Deformer=j),0<L.normal.length&&(Z=(new $.Math.Matrix3).getNormalMatrix(P),(j=new l(L.normal,3)).applyNormalMatrix(Z),n._4s("normal",j)),L.uvs.forEach(function(V,j){var N="uv"+(j+1).toString();n._4s(N=0===j?"uv":N,new l(L.uvs[j],2))}),S.material&&"AllSame"!==S.material.mappingType&&(v=L.materialIndex[0],O=0,L.materialIndex.forEach(function(V,j){V!==v&&(n._MS(O,j-O,v),v=V,O=j)}),0<n.groups.length&&((j=(Z=n.groups[n.groups.length-1]).start+Z.count)!==L.materialIndex.length&&n._MS(j,L.materialIndex.length-j,v)),0===n.groups.length&&n._MS(0,L.materialIndex.length,L.materialIndex[0])),this._VS(n,V,N,P),n},_YS:function(V,j){var v={};if(v.vertexPositions=V.Vertices!==h?V.Vertices.a:[],v.vertexIndices=V.PolygonVertexIndex!==h?V.PolygonVertexIndex.a:[],V.LayerElementColor&&(v.color=this._RS(V.LayerElementColor[0])),V.LayerElementMaterial&&(v.material=this._QS(V.LayerElementMaterial[0])),V.LayerElementNormal&&(v.normal=this._TS(V.LayerElementNormal[0])),V.LayerElementUV){v.uv=[];for(var N=0;V.LayerElementUV[N];)V.LayerElementUV[N].UV&&v.uv.push(this._SS(V.LayerElementUV[N])),N++}return v.weightTable={},null!==j&&(v.skeleton=j).rawBones.forEach(function(N,P){N.indices.forEach(function(V,j){v.weightTable[V]===h&&(v.weightTable[V]=[]),v.weightTable[V].push({id:P,weight:N.weights[j]})})}),v},_XS:function(y){var u={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},I=0,Q=0,g=[],$=[],E=[],W=[],z=[],A=[],p=this;return y.vertexIndices.forEach(function(N,P){var V,O,n,j,v=!1,S=(N<0&&(N^=-1,v=!0),[]),L=[];if(g.push(3*N,3*N+1,3*N+2),y.color&&(j=d(P,I,N,y.color),E.push(j[0],j[1],j[2])),y.skeleton){for(y.weightTable[N]!==h&&y.weightTable[N].forEach(function(V){L.push(V.weight),S.push(V.id)}),4<L.length&&(O=[0,0,0,0],n=[0,0,0,0],L.forEach(function(V,j){var P=V,v=S[j];n.forEach(function(V,j,N){V<P&&(N[j]=P,P=V,N=O[j],O[j]=v,v=N)})}),S=O,L=n);L.length<4;)L.push(0),S.push(0);for(var Z=0;Z<4;++Z)z.push(L[Z]),A.push(S[Z])}y.normal&&(j=d(P,I,N,y.normal),$.push(j[0],j[1],j[2])),y.material&&"AllSame"!==y.material.mappingType&&(V=d(P,I,N,y.material)[0]),y.uv&&y.uv.forEach(function(V,j){V=d(P,I,N,V);W[j]===h&&(W[j]=[]),W[j].push(V[0]),W[j].push(V[1])}),Q++,v&&(p._WS(u,y,g,V,$,E,W,z,A,Q),I++,Q=0,g=[],$=[],E=[],W=[],z=[],A=[])}),u},_WS:function(N,V,j,P,v,O,n,S,L,Z){for(var y=2;y<Z;y++)N.vertex.push(V.vertexPositions[j[0]]),N.vertex.push(V.vertexPositions[j[1]]),N.vertex.push(V.vertexPositions[j[2]]),N.vertex.push(V.vertexPositions[j[3*(y-1)]]),N.vertex.push(V.vertexPositions[j[3*(y-1)+1]]),N.vertex.push(V.vertexPositions[j[3*(y-1)+2]]),N.vertex.push(V.vertexPositions[j[3*y]]),N.vertex.push(V.vertexPositions[j[3*y+1]]),N.vertex.push(V.vertexPositions[j[3*y+2]]),V.skeleton&&(N.vertexWeights.push(S[0]),N.vertexWeights.push(S[1]),N.vertexWeights.push(S[2]),N.vertexWeights.push(S[3]),N.vertexWeights.push(S[4*(y-1)]),N.vertexWeights.push(S[4*(y-1)+1]),N.vertexWeights.push(S[4*(y-1)+2]),N.vertexWeights.push(S[4*(y-1)+3]),N.vertexWeights.push(S[4*y]),N.vertexWeights.push(S[4*y+1]),N.vertexWeights.push(S[4*y+2]),N.vertexWeights.push(S[4*y+3]),N.weightsIndices.push(L[0]),N.weightsIndices.push(L[1]),N.weightsIndices.push(L[2]),N.weightsIndices.push(L[3]),N.weightsIndices.push(L[4*(y-1)]),N.weightsIndices.push(L[4*(y-1)+1]),N.weightsIndices.push(L[4*(y-1)+2]),N.weightsIndices.push(L[4*(y-1)+3]),N.weightsIndices.push(L[4*y]),N.weightsIndices.push(L[4*y+1]),N.weightsIndices.push(L[4*y+2]),N.weightsIndices.push(L[4*y+3])),V.color&&(N.colors.push(O[0]),N.colors.push(O[1]),N.colors.push(O[2]),N.colors.push(O[3*(y-1)]),N.colors.push(O[3*(y-1)+1]),N.colors.push(O[3*(y-1)+2]),N.colors.push(O[3*y]),N.colors.push(O[3*y+1]),N.colors.push(O[3*y+2])),V.material&&"AllSame"!==V.material.mappingType&&(N.materialIndex.push(P),N.materialIndex.push(P),N.materialIndex.push(P)),V.normal&&(N.normal.push(v[0]),N.normal.push(v[1]),N.normal.push(v[2]),N.normal.push(v[3*(y-1)]),N.normal.push(v[3*(y-1)+1]),N.normal.push(v[3*(y-1)+2]),N.normal.push(v[3*y]),N.normal.push(v[3*y+1]),N.normal.push(v[3*y+2])),V.uv&&V.uv.forEach(function(V,j){N.uvs[j]===h&&(N.uvs[j]=[]),N.uvs[j].push(n[j][0]),N.uvs[j].push(n[j][1]),N.uvs[j].push(n[j][2*(y-1)]),N.uvs[j].push(n[j][2*(y-1)+1]),N.uvs[j].push(n[j][2*y]),N.uvs[j].push(n[j][2*y+1])})},_VS:function(N,P,V,v){var O;0!==V.length&&(N.morphTargetsRelative=!0,N.morphAttributes.position=[],O=this,V.forEach(function(V){V.rawTargets.forEach(function(V){var j=g.Objects.Geometry[V.geoID];j!==h&&O._US(N,P,j,v,V.name)})}))},_US:function(V,j,N,P,v){for(var j=j.PolygonVertexIndex!==h?j.PolygonVertexIndex.a:[],O=N.Vertices!==h?N.Vertices.a:[],n=N.Indexes!==h?N.Indexes.a:[],S=3*V.attributes.position.count,L=new Float32Array(S),Z=0;Z<n.length;Z++){var y=3*n[Z];L[y]=O[3*Z],L[1+y]=O[3*Z+1],L[2+y]=O[3*Z+2]}S=new l(this._XS({vertexIndices:j,vertexPositions:L}).vertex,3);S.name=v||N.attrName,S.applyMatrix4(P),V.morphAttributes.position.push(S)},_TS:function(V){var j=V.MappingInformationType,N=V.ReferenceInformationType,P=V.Normals.a,v=[];return"IndexToDirect"===N&&("NormalIndex"in V?v=V.NormalIndex.a:"NormalsIndex"in V&&(v=V.NormalsIndex.a)),{dataSize:3,buffer:P,indices:v,mappingType:j,referenceType:N}},_SS:function(V){var j=V.MappingInformationType,N=V.ReferenceInformationType,P=[];return{dataSize:2,buffer:V.UV.a,indices:P="IndexToDirect"===N?V.UVIndex.a:P,mappingType:j,referenceType:N}},_RS:function(V){var j=V.MappingInformationType,N=V.ReferenceInformationType,P=[];return{dataSize:4,buffer:V.Colors.a,indices:P="IndexToDirect"===N?V.ColorIndex.a:P,mappingType:j,referenceType:N}},_QS:function(V){var j=V.MappingInformationType,N=V.ReferenceInformationType;if("NoMappingInformation"===j)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:N};for(var P=V.Materials.a,v=[],O=0;O<P.length;++O)v.push(O);return{dataSize:1,buffer:P,indices:v,mappingType:j,referenceType:N}},_PS:function(V){if($5===h)return console.error("The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new s;var j=parseInt(V.Order);if(isNaN(j))return console.error("Invalid Order %s given for geometry ID: %s",V.Order,V.id),new s;for(var N=j-1,j=V.KnotVector.a,P=[],v=V.Points.a,O=0,n=v.length;O<n;O+=4)P.push((new u).fromArray(v,O));if("Closed"===V.Form)P.push(P[0]);else if("Periodic"===V.Form)for(var S=N,L=j.length-1-S,O=0;O<N;++O)P.push(P[O]);V=new $5(N,j,P,S,L).getPoints(12*P.length);return(new s).setFromPoints(V)}}),function(){});function g5(V,j,N,P){for(var v=function(V,j,N){var P=N.length-V-1;if(j>=N[P])return P-1;if(j<=N[V])return V;for(var v=V,O=P,n=Math.floor((v+O)/2);j<N[n]||j>=N[n+1];)j<N[n]?O=n:v=n,n=Math.floor((v+O)/2);return n}(V,P,j),O=function(V,j,N,P){for(var v=[],O=[],n=[],S=v[0]=1;S<=N;++S){O[S]=j-P[V+1-S],n[S]=P[V+S]-j;for(var L=0,Z=0;Z<S;++Z){var y=n[Z+1],u=O[S-Z],I=v[Z]/(y+u);v[Z]=L+y*I,L=u*I}v[S]=L}return v}(v,P,V,j),n=new u(0,0,0,0),S=0;S<=V;++S){var L=N[v-V+S],Z=O[S],y=L.w*Z;n.x+=L.x*y,n.y+=L.y*y,n.z+=L.z*y,n.w+=L.w*Z}return n}V(Q5,Z6,{_zS:function(V){this.params=V;var j=[],N=this._qs();if(N!==h)for(var P in N){P=N[P],P=this._js(P);j.push(P)}return this.params=null,j},_qs:function(){if(g.Objects.AnimationCurve===h)return h;var V=this._ns(),V=(this._ms(V),this._ls(V));return this._ks(V)},_ns:function(){var V,j=g.Objects.AnimationCurveNode,N=new Map;for(V in j){var P=j[V];null!==P.attrName.match(/S|R|T|DeformPercent/)&&(P={id:P.id,attr:P.attrName,curves:{}},N.set(P.id,P))}return N},_ms:function(V){var j,N=g.Objects.AnimationCurve;for(j in N){var P,v={id:N[j].id,times:N[j].KeyTime.a.map(B),values:N[j].KeyValueFloat.a},O=C.get(v.id);O!==h&&(P=O.parents[0].ID,(O=O.parents[0].relationship).match(/X/)?V.get(P).curves.x=v:O.match(/Y/)?V.get(P).curves.y=v:O.match(/Z/)?V.get(P).curves.z=v:O.match(/d|DeformPercent/)&&V.has(P)&&(V.get(P).curves.morph=v))}},_ls:function(S){var V,j=g.Objects.AnimationLayer,N=new Map;for(V in j){var L=[],P=C.get(parseInt(V));P!==h&&(P.children.forEach(function(V,j){if(S.has(V.ID)){var N,P,v,O=S.get(V.ID);if(O.curves.x!==h||O.curves.y!==h||O.curves.z!==h){if(L[j]===h)if((P=C.get(V.ID).parents.filter(function(V){return V.relationship!==h})[0].ID)!==h){if((v=g.Objects.Model[P.toString()])===h)return;var n={modelName:v.attrName?y(v.attrName):"",ID:v.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Z.traverse(function(V){V.ID===v.id&&(n.transform=V.matrix,V.userData.transformData&&(n.eulerOrder=V.userData.transformData.eulerOrder))}),n.transform||(n.transform=new z),"PreRotation"in v&&(n.preRotation=v.PreRotation.value),"PostRotation"in v&&(n.postRotation=v.PostRotation.value),L[j]=n}L[j]&&(L[j][O.attr]=O)}else O.curves.morph!==h&&(L[j]===h&&(V=C.get(V.ID).parents.filter(function(V){return V.relationship!==h})[0].ID,N=C.get(V).parents[0].ID,N=C.get(N).parents[0].ID,P=C.get(N).parents[0].ID,n={modelName:(v=g.Objects.Model[P]).attrName?PropertyBinding.sanitizeNodeName(v.attrName):"",ID:v.id,morphName:g.Objects.Deformer[V].attrName},L[j]=n),L[j][O.attr]=O)}}),N.set(parseInt(V),L))}return N},_ks:function(V){var j,N=g.Objects.AnimationStack,P={};for(j in N){var v=C.get(parseInt(j)).children,v=V.get(v[0].ID);P[j]={name:N[j].attrName,layer:v}}return P},_js:function(V){var j=[],N=this,P=(V.layer.forEach(function(V){j=j.concat(N._ps(V))}),0);return j.forEach(function(V){P=Math.max(P,V.times[V.times.length-1])}),{name:V.name,duration:P,tracks:j}},_ps:function(V){var j=[],N=new A,P=new Q,v=new A;return V.transform&&V.transform.decompose(N,P,v),N=N.toArray(),P=(new I).setFromQuaternion(P,V.eulerOrder).toArray(),v=v.toArray(),V.T!==h&&0<Z6.keys(V.T.curves).length&&((N=this._hs(V.ID,V.T.curves,N,"position"))!==h&&j.push(N)),V.R!==h&&0<Z6.keys(V.R.curves).length&&((N=this._gs(V.ID,V.R.curves,P,V.preRotation,V.postRotation,V.eulerOrder))!==h&&j.push(N)),V.S!==h&&0<Z6.keys(V.S.curves).length&&((P=this._hs(V.ID,V.S.curves,v,"scale"))!==h&&j.push(P)),V.DeformPercent!==h&&(N=this._fs(V))!==h&&j.push(N),j},_hs:function(V,j,N,P){var v=this._es(j);return{type:"linear",name:V+"."+P,times:v,values:this._ds(v,j,N)}},_gs:function(V,j,N,P,v,O){j.x!==h&&(this._cs(j.x),j.x.values=j.x.values.map(p)),j.y!==h&&(this._cs(j.y),j.y.values=j.y.values.map(p)),j.z!==h&&(this._cs(j.z),j.z.values=j.z.values.map(p));for(var n=this._es(j),S=this._ds(n,j,N),L=(P!==h&&((P=P.map(p)).push(O),P=(new I).fromArray(P),P=(new Q).setFromEuler(P)),v!==h&&((v=v.map(p)).push(O),v=(new I).fromArray(v),v=(new Q).setFromEuler(v).invert()),new Q),Z=new I,y=[],u=0;u<S.length;u+=3)Z.set(S[u],S[u+1],S[u+2],O),L.setFromEuler(Z),P!==h&&L.premultiply(P),v!==h&&L.multiply(v),L.toArray(y,u/3*4);return{type:"quaternion",name:V+".quaternion",times:n,values:y}},_fs:function(V){var j=V.DeformPercent.curves.morph,N=j.values.map(function(V){return V/100}),P=Z.getObjectByName(V.modelName).morphTargetDictionary[V.morphName];return{type:"number",name:V.ID+".morphTargetInfluences["+P+"]",times:j.times,values:N}},_es:function(V){var j=[];if(V.x!==h&&(j=j.concat(V.x.times)),V.y!==h&&(j=j.concat(V.y.times)),1<(j=(j=V.z!==h?j.concat(V.z.times):j).sort(function(V,j){return V-j})).length){for(var N=1,P=j[0],v=1;v<j.length;v++){var O=j[v];O!==P&&(P=j[N]=O,N++)}j=j.slice(0,N)}return j},_ds:function(V,j,N){var P=N,v=[],O=-1,n=-1,S=-1;return V.forEach(function(V){j.x&&(O=j.x.times.indexOf(V)),j.y&&(n=j.y.times.indexOf(V)),j.z&&(S=j.z.times.indexOf(V)),-1!==O?(V=j.x.values[O],v.push(V),P[0]=V):v.push(P[0]),-1!==n?(V=j.y.values[n],v.push(V),P[1]=V):v.push(P[1]),-1!==S?(V=j.z.values[S],v.push(V),P[2]=V):v.push(P[2])}),v},checkNeedInterpolate:function(N,V){function j(V){return Math.abs(N.values[V]-N.values[V-1])/(N.times[V]-N.times[V-1])}function P(V){var j=Math.abs(N.values[V]-N.values[V-1])%360;return(j=180<j?360-j:j)/(N.times[V]-N.times[V-1])}function v(V,j){return Math.max(V,j)/Math.min(V,j)}var O=1===V?2:V-1;return!(8<v(j(V),j(O))&&v(P(V),P(O))<1.2)},_cs:function(V){for(var j=1;j<V.values.length;j++){var N=V.values[j-1],P=V.values[j]-N,v=Math.abs(P);if(!(v<180)){var O=this.params?this.params.rotationInterpolation:h;if(!1!==O&&(!0===O||this.checkNeedInterpolate(V,j))){for(var O=v/179,n=P/O,S=N+n,v=V.times[j-1],L=(V.times[j]-v)/O,Z=v+L,y=[],u=[];Z<V.times[j];)y.push(Z),Z+=L,u.push(S),S+=n;V.times=f(V.times,j,y),V.values=f(V.values,j,u)}}}}});var $5=function(V,j,N,P,v){this.degree=V,this.knots=j,this._vs=[],this.startKnot=P||0,this.endKnot=v||this.knots.length-1;for(var O=0;O<N.length;++O){var n=N[O];this._vs[O]=new u(n.x,n.y,n.z,n.w)}this.getPoint=function(V,j){j=j||new A,V=this.knots[this.startKnot]+V*(this.knots[this.endKnot]-this.knots[this.startKnot]),V=g5(this.degree,this.knots,this._vs,V);return 1!==V.w&&V.divideScalar(V.w),j.set(V.x,V.y,V.z)},this.getPoints=function(V){V=V||5;for(var j=[],N=0;N<=V;N++)j.push(this.getPoint(N/V));return j}}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);