!function(g,b){"use strict";function w(){return document}function r(g){return w().createElement(g)}function l(g,b,Y){g.style.setProperty(b,Y,e)}function A(g,b){g.appendChild(b)}var Y,P=g.ht,X="innerHTML",h="className",e=null,M="px",E=P.Default,D=E.getInternal(),_="0",N=D.addEventListener,p=D.removeEventListener,G=E.isTouchable,u=E.isTouchEvent;D.addMethod(E,{menuLabelFont:(G?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),P.widget.Menu=function(g){var b=this,Y=b._view=D.createView(null,b),I=b.$1g=new P.widget.ContextMenu,N=r("ul");I._r=!0,I._view[h]+=" ht-widget-dropdownmenu",Y[h]="ht-widget-menu",N[h]="header",l(Y,"margin",_),l(Y,"padding",_),l(Y,"background",E.menuBackground),l(Y,"-webkit-user-select","none"),l(Y,"-moz-user-select","none"),l(Y,"user-select","none"),l(Y,"text-align","left"),l(Y,"border-bottom",E.menuSeparatorWidth+"px solid "+E.menuSeparatorColor),l(Y,"cursor","default"),l(Y,"overflow","auto"),l(Y,"white-space","nowrap"),l(Y,"font",E.menuLabelFont),l(Y,"color",E.menuLabelColor),l(Y,"box-sizing","border-box"),l(Y,"-moz-box-sizing","border-box"),l(N,"list-style","none"),l(N,"margin",_),l(N,"padding",_),l(N,"display","inline-block"),A(Y,N),b.setItems(g),b.$2g=function(g){b.$3g(g)},b.$4g=function(g){b.$5g(g)},b.$6g=function(g){b.$7g(g)},b.$8g=function(g){b.$9g(g)},b.$9b=function(g){b.$10g(g)},b._autoShow=!0,b.setAutoShow(!1),I.afterHide=function(){b.$11g()},I.afterShow=function(){b.$12g()},p(w(),"keydown",I.$3b),b.$3b=function(g){b.$13g(g)},b.invalidate()},g="Menu",Y={_items:e,$14g:E.menuHoverBackground,$15g:E.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(g){var b=this;if(b.$21g=g,b.setItems(b._items),"largeicons"===g){for(var Y=b._view.querySelectorAll(".header-item"),I=0,N=0;N<Y.length;N++)var P=Y[N],I=Math.max(I,P.clientWidth);for(N=0;N<Y.length;N++){P=Y[N];l(P,"min-width",I+M)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(g){this.$22g=g;for(var b=this._view.querySelectorAll(".header-item"),Y=0;Y<b.length;Y++){var I=b[Y];l(I,"margin-left",g+M),l(I,"margin-right",g+M)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(g){this.$23g=g;for(var b=this._view.querySelectorAll(".header-item"),Y=0;Y<b.length;Y++){var I=b[Y];l(I,"margin-top",g+M),l(I,"margin-bottom",g+M)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(g){this.$24g=g,l(this._view,"text-align",g)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){!1===this._enableGlobalKey&&(N(w(),"keydown",this.$3b),this._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,p(w(),"keydown",this.$3b)},setHoverBackground:function(g){this.$14g=g},setHoverColor:function(g){this.$15g=g},setItems:function(g){var b=this,Y=b._view,I=b.$21g;if(b._items=g,Y.children[0][X]="",b.$16g={},g&&g.length){for(var Y=Y.children[0],N=0,P=w().createDocumentFragment();N<g.length;N++){var M,E=g[N],D=r("li"),e=r("span");E.icon&&((M=r("canvas"))[h]="menu-item-icon","smallicons"===I?(l(M,"height","1.2em"),l(M,"width","1.2em"),l(M,"vertical-align","middle")):(l(M,"height","32px"),l(M,"width","32px"),l(M,"display","block"),l(M,"margin","0 auto")),M.$20g=E.icon,A(D,M)),D[h]="header-item",l(D,"display","inline-block"),l(D,"vertical-align","top"),l(D,"padding","0 1.2em"),l(D,"line-height","1.8em"),"largeicons"===I&&l(D,"text-align","center"),l(D,"background-color","rgba(0,0,0,0)"),D.setAttribute("data-index",N),b.$16g[N]=E.items,e[X]=E.label,"iconsonly"!==I&&A(D,e),A(P,D)}A(Y,P)}},showDropdownMenu:function(g){var b,Y=this,I=Y.$16g[g],N=Y.$1g,g=Y._view.children[0].children[g],P=Y.$17g;g&&g!==P&&(P&&Y.hideDropdownMenu(),P=g.getBoundingClientRect(),b=E.getWindowInfo(),Y.$17g=g,N.setItems(I),N.show(P.left+b.left,P.top+P.height+b.top,!1))},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(g,b){var Y=this._items;return Y&&0!==Y.length?this.$1g.getItemByProperty(g,b,Y):e},$12g:function(){var g=this,b=g.$17g;b.style.background=g.$14g,b.style.color=g.$15g,g._autoShow||N(w(),G?"touchstart":"mousedown",g.$9b)},$11g:function(){var g=this.$17g;g&&(g.style.background="",g.style.color="",this.$17g=e),p(w(),G?"touchstart":"mousedown",this.$9b)},$10g:function(g){var b=this._view,Y=this.$1g,I=b.children[0];!w().body.contains(b)||I.contains(g.target)||Y._view.contains(g.target)||this.hideDropdownMenu()},$13g:function(g){var b=this.$1g;w().body.contains(this._view)&&b.$13b.$4b.call(b.$13b,g,this._items)},setAutoShow:function(g){var b=this,Y=b.$1g,I=b._view;b._autoShow!==g&&(b._autoShow?(p(I,"mouseover",b.$2g),p(I,"mouseout",b.$4g),p(Y._view,"mouseout",b.$4g),G||(N(I,"mouseover",b.$8g),N(I,"mouseout",b.$8g)),N(I,G?"touchstart":"mousedown",b.$6g)):(p(I,"mouseover",b.$8g),p(I,"mouseout",b.$8g),p(I,G?"touchstart":"mousedown",b.$6g),p(w(),G?"touchstart":"mousedown",b.$9b),G||(N(I,"mouseover",b.$2g),N(I,"mouseout",b.$4g),N(Y._view,"mouseout",b.$4g))),b._autoShow=g)},$3g:function(g){var b=this._view.children[0],Y=g.target;if(b!==Y&&b.contains(Y)){for(;"header-item"!==Y[h];)Y=Y.parentNode;this.showDropdownMenu(Y.getAttribute("data-index"))}},$5g:function(g){var b=this._view.children[0],Y=this.$1g,I=g.target,g=g.relatedTarget;!b.contains(I)&&!Y._view.contains(I)||b.contains(g)||Y._view.contains(g)||this.hideDropdownMenu()},$7g:function(g){g.preventDefault();var b=this,Y=b._view.children[0],I=b.$1g,N=g.target;if(E.isLeftButton(g)&&Y!==N&&Y.contains(N))if(u(g)){for(;"header-item"!==N[h];)N=N.parentNode;var Y=N.getAttribute("data-index"),I=b.$1g,g=b._view.children[0].children[Y],P=b.$17g;I.isShowing()&&b.hideDropdownMenu(),g!==P&&b.showDropdownMenu(Y)}else if(I.isShowing())b.hideDropdownMenu();else{for(;"header-item"!==N[h];)N=N.parentNode;b.showDropdownMenu(N.getAttribute("data-index"))}},$9g:function(g){var b=this,Y=b._view,I=b.$1g,N=g.target;if(Y.contains(N)){for(var P=Y.querySelectorAll(".header-item"),M=e,E=0;E<P.length;E++){var D=P[E];D.style.background="",D.style.color="","mouseover"===g.type?D.contains(N)&&(M=D):"mouseout"===g.type&&I.isShowing()&&b.$17g===D&&(M=D)}I.isShowing()&&(M=M||b.$17g,b.showDropdownMenu(M.getAttribute("data-index"))),M&&(M.style.background=b.$14g,M.style.color=b.$15g)}},getShowingMenuIndex:function(){var g=this.$17g;return g?g.getAttribute("data-index"):-1},addTo:function(g){var b=this._view;A(g,b),this.invalidate()},dispose:function(){var g=this,b=g._view,Y=g.$1g;b&&(g._autoShow?(p(b,"mouseover",g.$2g),p(b,"mouseout",g.$4g),p(Y._view,"mouseout",g.$4g)):(p(b,"mouseover",g.$8g),p(b,"mouseout",g.$8g),p(b,G?"touchstart":"mousedown",g.$6g),p(w(),G?"touchstart":"mousedown",g.$9b)),p(w(),"keydown",g.$3b),Y.dispose(),b.parentNode&&b.parentNode.removeChild(b),g._view=g.$1g=g.$16g=g._items=g.$17g=g.$2g=g.$4g=g.$6g=g.$8g=g.$9b=g.$3b=e)},$19g:function(g,b,Y,I){g=D.initContext(g);D.translateAndScale(g,0,0,1),g.clearRect(0,0,Y,I),E.drawStretchImage(g,E.getImage(b),"fill",0,0,Y,I),g.restore()},validateImpl:function(){for(var g=this._view.querySelectorAll(".menu-item-icon"),b=0;b<g.length;b++){var Y=g[b],I=Y.clientWidth,N=Y.clientHeight;I&&N&&(D.setCanvas(Y,I,N),this.$19g(Y,E.getImage(Y.$20g),I,N))}}},E.def(P.widget[g],b,Y)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);