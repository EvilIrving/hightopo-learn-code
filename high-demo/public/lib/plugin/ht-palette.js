!function(Y,v){"use strict";function w(){return document}function u(){return c("div")}function K(){return c("canvas")}function z(){return document.body}function L(Y,v,w){Y.style.setProperty(v,w,_)}function B(Y,v){Y.appendChild(v)}function V(Y,v){Y.removeChild(v)}function m(Y){this.$22h=Y,this.addListeners()}var g="px",R="innerHTML",S="className",f=ht.Default,O=ht.Color,x=ht.Node,D="top",Q=f.animate,M=f.getInternal(),E="0",y="none",t="max-height",H="font",A="background",F="border-box",P="user-select",$="box-sizing",r="overflow",s=f.isTouchable,q=f.isTouchEvent,M=f.getInternal(),Z=O.titleIconBackground,d=f.scrollBarInteractiveSize,k=/msie 9/.test(Y.navigator?Y.navigator.userAgent.toLowerCase():""),_=null,c=function(Y){return w().createElement(Y)},U=M.addEventListener,Y=(M.removeEventListener,M.addMethod(f,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:Z,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:Z}]},paletteTitleLabelColor:f.labelSelectColor,paletteTitleLabelFont:f.labelFont,paletteContentLabelFont:f.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:f.widgetTitleHeight,paletteTitleBackground:O.titleBackground,paletteTitleHoverBackground:O.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:void 0,paletteItemHoverBorderColor:O.highlight,paletteItemSelectBackground:O.highlight},!0),".palette-item:hover{border: 1px solid "+f.paletteItemHoverBorderColor+" !important} .palette-header:hover{background: "+f.paletteTitleHoverBackground+" !important}"),Z=document.createElement("style");s||(Z.styleSheet?Z.styleSheet.cssText=Y:Z.appendChild(w().createTextNode(Y))),w().getElementsByTagName("head")[0].appendChild(Z);f.def(m,v,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var Y=this;Y.$36h&&z().removeChild(Y.$36h),Y.$23h=Y.$24h=Y.$25h=Y.$35h=Y.$36h=_},handle_touchstart:function(Y){for(var v,w,O=this,m=O.$22h,z=Y.target,P=m.sm(),s=m.dm(),Z="palette-header",q="palette-item",d=!1,u=!1,K=!1;z&&(z[S]||"").indexOf(Z)<0&&(z[S]||"").indexOf(q)<0;)z=z.parentNode;z&&0<=z[S].indexOf("palette-header-tool")?d=!0:z&&0<=z[S].indexOf(Z)?K=!0:z&&0<=z[S].indexOf(q)&&(u=!0),f.isLeftButton(Y)?O.$27h(Y)?(O.$24h=f.getClientPoint(Y),O.$25h=m.ty()):d?(f.preventDefault(Y),v=z.parentNode.$11h,(d=(w=s.getDataById(v)).s("tools")[z.toolIndex]).action&&d.action.call(m)):K?(f.preventDefault(Y),v=z.$11h,(w=s.getDataById(v)).isExpanded()?w.setExpanded(!1):w.setExpanded(!0)):u?(v=z.$11h,d=s.getDataById(v),P.ss(d),m.handleDragAndDrop&&(f.preventDefault(Y),d.s("draggable")&&(m.handleDragAndDrop(Y,"prepare"),O.$35h=0)),d.s("draggable")||(f.preventDefault(Y),O.$24h=f.getClientPoint(Y),O.$25h=m.ty())):(f.preventDefault(Y),O.$24h=f.getClientPoint(Y),O.$25h=m.ty()):O.$26h(Y)},handle_mousedown:function(Y){this.handle_touchstart(Y)},handle_mousewheel:function(Y){this.handleScroll(Y,Y.wheelDelta/40,Y.wheelDelta!==Y.wheelDeltaX)},handle_DOMMouseScroll:function(Y){this.handleScroll(Y,-Y.detail,1)},handleScroll:function(Y,v,w){var O=this.$22h;f.preventDefault(Y),w&&O._41o()&&O.ty(O.ty()+20*v)},handle_mouseup:function(Y){this.handle_touchend(Y)},handle_touchend:function(Y){this.$37h(Y),this.$26h(Y)},handleWindowMouseUp:function(Y){this.handleWindowTouchEnd(Y)},handleWindowTouchEnd:function(Y){this.$37h(Y),this.$26h(Y)},$37h:function(Y){var v=this.$22h;2===this.$35h&&(this.$35h=3,v.handleDragAndDrop(Y,"end"))},handleWindowMouseMove:function(Y){this.handleWindowTouchMove(Y)},handleWindowTouchMove:function(Y){var v=this,w=v.$22h,O=v.$23h,m=v.$24h,z=v.$25h,P=f.getClientPoint(Y),s=w._29I,Z=v.$36h;1===v.$35h||2===v.$35h?(v.$35h=2,w.handleDragAndDrop(Y,"between"),q(Y)&&(Y=Y.touches[0]||Y.changedTouches[0]),Z.style.left=Y.pageX-parseInt(Z.width)/2+g,Z.style.top=Y.pageY-parseInt(Z.height)/2+g):"p"===O?w.ty(z+P.y-m.y):"v"===O&&w.ty(z+(m.y-P.y)/s.height*w._59I)},handle_mousemove:function(Y){this.handle_touchmove(Y)},handle_touchmove:function(Y){var v,w,O,m;!f.isDragging()&&f.isLeftButton(Y)&&(O=(w=this).$22h,v=w.$27h(Y),w.$24h?w.$23h||f.getDistance(f.getClientPoint(Y),w.$24h)<2||(w.$23h=v?"v":"p",f.startDragging(w,Y)):v?O._43o():0===w.$35h&&(w.$35h=1,O.handleDragAndDrop(Y,"begin"),f.startDragging(w,Y),q(Y)&&(Y=Y.touches[0]||Y.changedTouches[0]),v=w.$36h=new Image,w=O.$10h[O.sm().ld().getId()].querySelector(".image-box"),O=parseInt(w.style.width),m=parseInt(w.style.height),v.draggable=!1,v.src=w.toDataURL(),v.width=O,v.height=m,v.style.position="absolute",v.style.left=Y.pageX-O/2+g,v.style.top=Y.pageY-m/2+g,z().appendChild(v)))},$27h:function(Y){var v=this.$22h,w=v.getView(),O=w.getBoundingClientRect(),m=v._29I,Y=Y.clientX-O.left+w.scrollLeft;return v._41o()&&m.x+m.width-Y<d}}),ht.widget.Palette=function(Y){var v,w=this,O=w._view=M.createView(null,w);w.$9h={},w.$10h={},w.$4h={},w._29I={x:0,y:0,width:0,height:0},w._59I=0,w.dm(Y||new ht.DataModel),O[S]="ht-widget-palette",w.$29h=new m(w),L(O,A,f.paletteContentBackground),L(O,r,"auto"),L(O,$,F),L(O,"-moz-"+$,F),L(O,"-webkit-"+P,y),L(O,"-moz-"+P,y),L(O,"-ms-"+P,y),L(O,P,y),L(O,"position","absolute"),L(O,"overflow","hidden"),B(O,w._79O=(Y=u(),(v=Y.style).msTouchAction=y,v.cursor="default",s&&v.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",_),v.position="absolute",v.left=E,v.top=E,Y)),U(O,"dragstart",function(Y){Y.dataTransfer&&(Y.dataTransfer.setData("Text","nodeid:"+Y.target.$11h),Y.dataTransfer.effectAllowed="all",w.$29h.$26h())})},O="Palette",Y={ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:f.autoHideScrollBar,_scrollBarSize:f.scrollBarSize,_scrollBarColor:f.scrollBarColor,getViewRect:function(){return this._29I},ty:function(Y){if(Y==_)return this.getTranslateY();this.setTranslateY(Y)},setTranslateY:function(Y){var v;this.$32h==_&&(Y=this.$33h(Y),v=this.$30h,this.$30h=Y,this.fp("translateY",v,Y))},getTranslateY:function(){return this.$30h},setLayout:function(Y){var v,w,O=this,m=O._layout;"smallicons"===(O._layout=Y)?v=w=20:"iconsonly"===Y?v=w=50:(v=70,w=50),O.setItemImageWidth(v),O.setItemImageHeight(w),O.setItemImagePadding(4),O.fp("layout",m,Y)},getDataAt:function(Y){for(var v=Y.target;v&&v.$11h==_;)v=v.parentNode;if(v&&v.$11h!=_)return this.getDataModel().getDataById(v.$11h)},$20h:function(){var Y=16;return s&&(Y*=1.2),Y},$19h:function(){return f.paletteTitleHeight},$18h:function(){var Y=f.paletteSeparatorWidth,v=f.paletteTitleBackground,v=f.paletteSeparatorColor||f.brighter(v);return Y+g+" solid "+v},$17h:function(Y){L(Y,"cursor","pointer"),L(Y,"display","inline-block"),L(Y,"margin-right",(s?8:4)+g),L(Y,"vertical-align",D)},$1h:function(Y){var v=this,w=u(),O=u(),m=c("span"),z=(w[S]="palette-header",L(w,"position","relative"),L(w,A,f.paletteTitleBackground),L(w,"color",f.paletteTitleLabelColor),L(w,D,E),L(w,$,F),L(w,"-moz-"+$,F),L(w,"padding","0 5px 0 0"),L(w,"border-top",v.$18h()),L(w,"width","100%"),L(w,"cursor","pointer"),L(w,"white-space","nowrap"),L(w,r,"hidden"),L(w,H,f.paletteTitleLabelFont),L(w,"line-height",v.$19h()+g),w.$11h=Y.getId(),K()),P=v.$19h(),s=v.$20h(),Z=(v.$17h(z),M.setCanvas(z,s,P),B(w,z),Y.s("tools"));if(Z)for(var q=0;q<Z.length;q++){var d=K();v.$17h(d),M.setCanvas(d,s,P),d[S]="palette-header-tool palette-header-tool"+Y.getId()+"-"+q,d.style.position="absolute",d.style.right=(s+10)*q+"px",d.toolIndex=q,B(w,d)}return z[S]="palette-toggle-icon-"+Y.getId(),O[S]="palette-content",L(O,"max-height",0+g),L(O,H,f.paletteContentLabelFont),L(O,r,"hidden"),O.$11h=Y.getId(),v.$9h[Y.getId()]=O,m[R]=Y.getName(),L(m,H,f.paletteTitleLabelFont),B(w,z),B(w,m),[w,O]},$2h:function(Y){var v=this,w=v._layout,O=k&&Y.s("draggable")?c("a"):u(),m=K(),z=u(),P=Y.getName()||"",s=Y.s("title")||Y.getToolTip()||P,Z=v._itemMargin,q=(m[S]="image-box",v.getItemImageWidth()),d=v.getItemImageHeight();return M.setCanvas(m,q,d),B(O,m),z[R]=P,z[S]="label-box","iconsonly"!==w&&B(O,z),O[S]="palette-item",L(O,"vertical-align",D),L(O,"cursor","pointer"),L(O,"border-radius",5+g),L(O,"border","1px solid transparent"),L(O,"text-align","center"),L(O,"display","inline-block"),L(O,"margin-left",Z+g),L(O,"margin-top",Z+g),L(O,"color",f.paletteContentLabelColor),"smallicons"===w?(L(m,"vertical-align","middle"),L(O,"margin-left",2+g),L(O,"margin-top",2+g),L(O,"padding",2+g),L(O,"text-align","left"),L(z,"display","inline-block"),L(z,"min-width",v.$21h+v._itemMargin+g)):"largeicons"===w&&(L(z,"max-width",q+g),L(z,"overflow","hidden")),O.$11h=Y.getId(),s&&(O.title=s),Y.s("draggable")&&!v.handleDragAndDrop&&(k?(O.href="#",L(O,"text-decoration",y)):(O.draggable="true",L(O,"transform","translate(0,0)"),L(O,"z-index","0"))),O},$16h:function(Y,v,w,O){Y=M.initContext(Y),M.translateAndScale(Y,0,0,1),Y.clearRect(0,0,w,w),w=(w-O)/2;f.drawStretchImage(Y,f.getImage(v),"fill",0,w,O,O),Y.restore()},$15h:function(Y){var v,w,O=Y.getId(),O=this._view.querySelector(".palette-toggle-icon-"+O),Y=Y.isExpanded()?f.paletteCollapseIcon:f.paletteExpandIcon;O&&Y&&(v=this.$19h(),w=this.$20h(),this.$16h(O,Y,v,w))},_drawToolsIcon:function(Y){var v=Y.s("tools");if(v)for(var w=0;w<v.length;w++){var O=this._view.querySelector(".palette-header-tool"+Y.getId()+"-"+w),m=v[w].icon,z=this.$19h(),P=this.$20h();this.$16h(O,m,z,P)}},$14h:function(Y){var v,w,O,m=this,z=Y.getId(),z=m.$10h[z].querySelector(".image-box"),P=Y.getImage(),s=Y.s("image.stretch");z&&P&&(z=M.initContext(z),v=m.getItemImagePadding(),v="smallicons"===m._layout?v/2:v,w=m.getItemImageWidth()-2*v,O=m.getItemImageHeight()-2*v,M.translateAndScale(z,0,0,1),z.clearRect(0,0,w,O),f.drawStretchImage(z,f.getImage(P),s,v,v,w,O,Y,m,m.getBodyColor(Y)),z.restore())},validateImpl:function(){var w=this,Y=w.$9h,v=w._layout,O=w.$10h,m=w.$4h,z=w._view,P=w.dm();if(w.$13h&&(delete w.$13h,m={},P.each(function(Y){m[Y.getId()]=Y})),"smallicons"===v)for(var s in m){var Z=m[s];Z instanceof x&&(Z=Z.getName()||"",Z=f.getTextSize(f.paletteContentLabelFont,Z).width,w.$21h!=_&&w.$21h>Z||(w.$21h=Z))}for(s in m){var q,d,u,K,L,S,D,M,y,H=m[s];P.contains(H)?H instanceof ht.Group?(u=w.$1h(H),(L=O[H.getId()])&&(q=L.nextSibling,V(z,q),V(z,L)),L=P.getSiblings(H).indexOf(H),(d=z.children[2*L]||w._79O)&&d.parentNode?(z.insertBefore(u[0],d),z.insertBefore(q||u[1],d)):(z.appendChild(u[0]),z.appendChild(q||u[1])),O[H.getId()]=u[0],K=Y[H.getId()]=q||u[1],d=H.$12h,u=H.s("promptText"),d||(H.$12h=c("div"),H.$12h[R]=u||"",d=H.$12h),0===H.getChildren().size()?K.contains(d)||B(K,d):K.contains(d)&&V(K,d)):(S=H.getParent())&&(u=w.$2h(H),D=O[H.getId()],K=Y[S.getId()],D&&V(D.parentNode,D),L=P.getSiblings(H).indexOf(H),(D=K.children[L])?K.insertBefore(u,D):B(K,u),O[H.getId()]=u,w.$14h(H)):(M=(D=O[H.getId()]).parentNode,H instanceof ht.Group?(y=D.nextSibling,V(z,D),V(z,y),delete Y[H.getId()]):(V(M,D),0===M.children.length&&(S=P.getDataById(M.$11h))&&(d=S.$12h)&&!M.contains(d)&&B(M,d)),delete O[H.getId()])}w.$4h={};function A(){var Y=w._59I,v=0;w.$32h!=_&&(clearInterval(w.$32h),v=0,delete w.$32h),w.$32h=setInterval(function(){w.$31h(),Y===w._59I?2<=++v&&(clearInterval(w.$32h),delete w.$32h):(v=0,Y=w._59I)},30)}var F,$;for(F in Y)K=Y[F],H=P.getDataById(Y[F].$11h),w.$15h(H),w._drawToolsIcon(H),H.isExpanded()?(K.style.maxHeight===0+g?($=K.scrollHeight+w._itemMargin+g,Q(K).duration(200).set(t,$).set("padding-bottom",w._itemMargin+g).end(function(){A()})):K.style.maxHeight=K.scrollHeight+g,K.style.paddingBottom=w._itemMargin+g):K.style.maxHeight!==0+g&&Q(K).duration(200).set(t,E).set("padding-bottom",E).end(function(){A()});w.$28h(),w.$31h()},$31h:function(){for(var Y=this,v=Y._view,w=0,O=v.children,m=0;m<O.length;m++){var z=O[m];z.className&&0<=z.className.indexOf("palette-")&&(w+=z.offsetHeight)}Y._59I=w,Y.$30h=Y.$33h(Y.ty());var P=Y.ty();v.scrollTop=-P,Y._29I={x:0,y:-P,width:v.clientWidth,height:v.clientHeight},L(Y._79O,D,-P+g),Y._93I()},$33h:function(Y){var v=this._29I.height-this._59I;return 0<(Y=Y<v?v:Y)?0:Math.round(Y)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(Y){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(Y.property)<0&&this.redraw(),"translateY"===Y.property&&(this.iv(),this._43o())},findDataByName:function(Y){for(var v=this.dm().getDatas(),w=0;w<v.size();w++){var O=v.get(w);if(O.getName()===Y)return O}},setDataModel:function(Y){var v=this,w=v._dataModel,O=v._selectionModel;w!==Y&&(w&&(w.umm(v.$6h,v),w.umd(v.$8h,v),w.umh(v.$7h,v),O||w.sm().ums(v.$28h,v)),(v._dataModel=Y).mm(v.$6h,v),Y.md(v.$8h,v),Y.mh(v.$7h,v),O?O._21I(Y):Y.sm().ms(v.$28h,v),v.sm().setSelectionMode("single"),v.fp("dataModel",w,Y))},$6h:function(Y){var v=this,w=v._view,O=Y.data,m=v.$4h;"add"===Y.kind||"remove"===Y.kind?m[O.getId()]=O:"clear"===Y.kind&&(v.$10h={},v.$9h={},v.$4h={},w[R]=""),v.iv()},$7h:function(Y){Y=Y.data;this.$4h[Y.getId()]=Y,this.iv()},$8h:function(Y){var v=Y.data;"expanded"!==Y.property&&(this.$4h[v.getId()]=v),this.iv()},$28h:function(){var v,w=this,Y=w.sm(),O=Y.ld();this.dm().each(function(Y){(v=w.$10h[Y.getId()])&&0<=v[S].indexOf("palette-item")&&(Y===O?L(v,A,f.paletteItemSelectBackground):v.style.removeProperty(A))})}},f.def(ht.widget[O],v,Y)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);