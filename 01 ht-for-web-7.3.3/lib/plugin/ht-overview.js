!function(c,M){"use strict";var c=c.ht,r=c.graph,O=c.Default,c=c.Color,y=null,m="px",n=O.getInternal(),v=n.getPinchDist,H=O.preventDefault,J=O.getTouchCount,q=O.startDragging;n.addMethod(O,{overviewBackground:c.widgetBackground,overviewMaskBackground:c.transparent,overviewContentBorderColor:c.widgetBorder,overviewContentBackground:c.background},!0),r.Overview=function(c){var M=this,r=M._view=n.createView(1,M);M._canvas=n.createCanvas(r),r.style.background=O.overviewBackground,r.appendChild(M._mask=n.createDiv()),M.setGraphView(c),M.addListeners()},O.def("ht.graph.Overview",M,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:O.overviewMaskBackground,_contentBorderColor:O.overviewContentBorderColor,_contentBackground:O.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(c){var M,r=this;r.gv!==c&&(M=r.gv,r.gv=c,M&&(M.removeViewListener(r.handleGraphViewChanged,r),M.ump(r.handleGraphViewPropertyChanged,r)),c&&(c.addViewListener(r.handleGraphViewChanged,r),c.mp(r.handleGraphViewPropertyChanged,r)),r.fp("graphView",M,c),r.redraw())},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(c){this.redraw()},handleGraphViewChanged:function(c){this._autoUpdate&&"validate"===c.kind&&this.redraw()},handleGraphViewPropertyChanged:function(c){"canvasBackground"!==c.property&&(!this.getFixToRect()||"zoom"!==c.property&&"translateX"!==c.property&&"translateY"!==c.property)||this.redraw()},redraw:function(){var c=this;c._redraw||(c._redraw=1,c.iv(50))},validateImpl:function(){var c,M,r,G,v,H,J,q,p,V,$,K,Z,I=this,d=I.gv,F=I._canvas,u=I.getWidth(),S=I.getHeight(),s=I._redraw,X=O.devicePixelRatio;d?(c=I._mask.style,M=d.getViewRect(),r=(Z=(Z=this.getFixToRect())?"boolean"==typeof Z?d.getContentRect():Z:d.getScrollRect()).x,G=Z.y,v=Z.width,H=Z.height,J=I._rate=Math.max(v/u,H/S),q=I._x=(u-v/J)/2,p=I._y=(S-H/J)/2,0!==M.width&&0!==M.height||I.hasRetry||(O.callLater(I.iv,I,y),I.hasRetry=!0),u===F.clientWidth&&S===F.clientHeight||(n.setCanvas(F,u,S),s=1),n.isSameRect(Z,I._scrollRect)||(I._scrollRect=Z,s=1),s&&(V=n.initContext(F),$=(Z=d.getDataModel()).getBackground()||I._contentBackground,K=I._contentBorderColor,V.clearRect(0,0,u*X,S*X),Z=Z.getBackground()&&0<Z.a("width")&&0<Z.a("height"),$&&!Z&&n.fillRect(V,q*X,p*X,v/J*X,H/J*X,$),n.translateAndScale(V,-r/J+q,-G/J+p,1/J),d._42(V),V.restore(),K&&n.drawBorder(V,K,q*X,p*X,v/J*X,H/J*X)),c.background=I._maskBackground,c.left=q+(M.x-r)/J+m,c.top=p+(M.y-G)/J+m,c.width=M.width/J+m,c.height=M.height/J+m,I._redraw=null):s&&((V=n.initContext(F)).clearRect(0,0,u*X,S*X),V.restore(),I._redraw=null)},center:function(c){var M,r,G,v,H,J=this,q=J.gv;q&&(M=q._zoom,r=q._29I,G=J._rate,H=J._scrollRect,c=O.getLogicalPoint(c,J._canvas),v=H.x+(c.x-J._x)*G,H=H.y+(c.y-J._y)*G,q.setTranslate((r.width/2-v)*M,(r.height/2-H)*M))},handle_mousedown:function(c){this.handle_touchstart(c)},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},handle_mousewheel:function(c){this.handleScroll(c,c.wheelDelta)},handle_DOMMouseScroll:function(c){2===c.axis&&this.handleScroll(c,-c.detail)},handleScroll:function(c,M){H(c),this.gv&&(c=this.gv,0<M?c.scrollZoomIn():M<0&&c.scrollZoomOut())},handle_touchstart:function(c){var M,r,G;H(c),this.gv&&O.isLeftButton(c)&&(r=(M=this).gv,1===(G=J(c))?O.isDoubleClick(c)&&r.isResettable()?r.reset():(M.center(c),q(M,c)):2===G&&(M._dist=v(c),q(M,c)))},handleWindowTouchEnd:function(c){delete this._dist},handleWindowTouchMove:function(c){var M,r;this.gv&&(M=this._dist,1===(r=J(c))?this.center(c):2===r&&M!=y&&this.gv.handlePinch(y,v(c),M))}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);