!function(r){"use strict";function D(r){var Q,X,V=r.data,D=this.dm();V&&"add"===r.kind&&(Q=D.$1c,X=V instanceof T?"shape.":"edge.",Q&&V.s(X+"dash.flow")&&Q.indexOf(V)<0&&Q.push(V)),"clear"===r.kind&&(D.$1c=[])}function s(r){var Q=r.property,X=r.data,r=r.newValue,V=this.dm().$1c,D=X instanceof T?"s:shape.dash.flow":"s:edge.dash.flow";if(V&&Q===D)if(r)V.indexOf(X)<0&&V.push(X);else for(var s=V.length,L=0;L<s;L++)if(V[L]===X){V.splice(L,1);break}}function Q(){var r,Q,X,V,D=this._data,s=D instanceof T?"shape.":"edge.",L=D.s(s+"dash.pattern"),$=D.s(s+"dash.flow.reverse");L&&D.s(s+"dash")&&D.s(s+"dash.flow")&&this.$7c&&(r=this.s(s+"dash.offset")||0,Q=D.s(s+"dash.flow.step"),X=D.getStyleMap(),V=0,L.forEach(function(r){V+=r}),r=(r-(Q=$?-Q:Q))%V,X||(D._styleMap=X={}),X[s+"dash.offset"]=r)}var X=r.ht,N=X.Default,V=Math,f=(V.PI,V.sin,V.cos,V.atan2,V.sqrt,V.max),d=V.floor,I=(V.round,V.ceil),T=X.Shape,g=(X.Edge,X.List),V=X.Style,L=X.graph,S=N.getInternal(),$=S.ui(),y=null,Y="prototype",k=r.clearInterval,z=r.setInterval,r=L.GraphView[Y],L=$.EdgeUI[Y],$=$.ShapeUI[Y],t=$._80o,q=L._80o,X=X.DataModel[Y],G=X.prepareRemove,B=r.setDataModel;V["edge.dash.flow.step"]==y&&(V["edge.dash.flow.step"]=3),V["shape.dash.flow.step"]==y&&(V["shape.dash.flow.step"]=3),X.prepareRemove=function(r){G.call(this,r);var Q=r._dataModel.$1c;if(Q)for(var X=Q.length,V=0;V<X;V++)if(Q[V]===r){Q.splice(V,1);break}},r.setDataModel=function(r){var X,Q=this,V=Q._dataModel;V!==r&&(V&&(V.umm(D,Q),V.umd(s,Q),V.$1c=[]),r.mm(D,Q),r.md(s,Q),X=r.$1c=[],r.each(function(r){var Q=r instanceof T?"shape.":"edge.";r.s(Q+"dash.flow")&&X.indexOf(r)<0&&X.push(r)}),B.call(Q,r))},r.setDashFlowInterval=function(r){var Q=this,X=Q.$2c;Q.$2c=r,Q.fp("dashFlowInterval",X,r),Q.$3c!=y&&(k(Q.$3c),delete Q.$3c,Q.enableDashFlow(r))},r.getDashFlowInterval=function(){return this.$2c},r.$4c=function(){var Q,X,r,V,D,s,L,$=this,T=$.tx(),y=$.ty(),Y=$._zoom,k={x:-T/Y,y:-y/Y,width:$.getWidth()/Y,height:$.getHeight()/Y},z=$.dm().$1c,t=$._56I,q=new g;z.forEach(function(r){t[r.getId()]&&(X=$.getDataUI(r))&&(X=X._79o())&&q.add(X)}),0!==q.size()&&(q.each(function(r){N.intersectsRect(k,r)&&(Q=N.unionRect(Q,r))}),Q&&(Q&&(N.grow(Q,f(1,1/Y)),Q.x=d(Q.x*Y)/Y,Q.y=d(Q.y*Y)/Y,Q.width=I(Q.width*Y)/Y,Q.height=I(Q.height*Y)/Y,Q=N.intersection(k,Q)),Q&&((z=$._canvas.getContext("2d")).save(),z.lineCap=N.lineCap,z.lineJoin=N.lineJoin,r=N.devicePixelRatio,V=Q.x,D=Q.y,s=Q.width,L=Q.height,V=Math.floor((V*Y+T)*r),D=Math.floor((D*Y+y)*r),s=Math.ceil(s*Y*r)+1,L=Math.ceil(L*Y*r)+1,Q.x=(V/r-T)/Y,Q.y=(D/r-y)/Y,Q.width=s/r/Y,Q.height=L/r/Y,z.beginPath(),z.rect(V,D,s,L),z.clip(),z.clearRect(V,D,s,L),S.translateAndScale(z,T,y,Y),$.$5c(z,Q),z.restore())))},r.$5c=function(Q,X){var V,D,s=this;s._93db(Q),s.each(function(r){s._56I[r._id]&&(V=s.getDataUI(r))&&(D=V._79o(),X&&!N.intersectsRect(X,D)||(V.$7c=!0,V._42(Q),delete V.$7c))}),s._92db(Q)},r.enableDashFlow=function(r){var Q=this;Q.$3c==y&&(Q.$3c=z(function(){Q.$4c()},r||Q.$2c||50))},r.disableDashFlow=function(){k(this.$3c),delete this.$3c};L._80o=function(r){q.call(this,r),Q.call(this)},$._80o=function(r){t.call(this,r),Q.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);