!function(n,s){"use strict";function $(n){return u().createElement(n)}function G(){return $("canvas")}function V(n,s,$){n.style.setProperty(s,$,bs)}function S(n,s){n.appendChild(s)}function m(n,s){n.removeChild(s)}var p,e="position",b="absolute",F="px",P="left",_="right",A="top",y="bottom",Z="display",g=ht.Default,I=g.getInternal(),c=Math.floor,L=Math.ceil,D=Math.PI,bs=null,N=n.parseInt,u=function(){return document},C=(I=g.getInternal()).addEventListener,o=I.removeEventListener;ht.widget.RulerFrame=function(n){var $=this,p=$._view=I.createView(null,$),s=$.$1k=G(),g=$.$2k=G(),m=$.$3k=G(),L=$.$4k=G();$._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},$._topRulerConfig={visible:!0},$._rightRulerConfig={visible:!1},$._bottomRulerConfig={visible:!1},$._leftRulerConfig={visible:!0},S(p,s),S(p,m),S(p,g),S(p,L),V(p,e,"relative"),V(p,"box-sizing","border-box"),V(p,"-moz-box-sizing","border-box"),V(s,e,b),V(g,e,b),V(m,e,b),V(L,e,b),$.$14k=function(n){$.$13k=1,$.iv()},$.$15k=function(n){var s;($._topRulerConfig.guideVisible||$._rightRulerConfig.guideVisible||$._bottomRulerConfig.guideVisible||$._leftRulerConfig.guideVisible||$._defaultRulerConfig.guideVisible||($._topRulerConfig.guideTipVisible||$._rightRulerConfig.guideTipVisible||$._bottomRulerConfig.guideTipVisible||$._leftRulerConfig.guideTipVisible||$._defaultRulerConfig.guideTipVisible)&&$._component)&&(s=p.getBoundingClientRect(),$.$16k={x:n.clientX-s.left,y:n.clientY-s.top},$.$5k())},$.setComponent(n)},n="RulerFrame",p={ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(n){var s,$=this,p=$._component,g=$.getView();g&&($._component=n,$.fp("component",p,n),p&&(s=$.getComponentView(p),m(g,s),o(g,"mousemove",$.$15k),$.removeComponentPropertyChangeListener(p,$.$14k)),n&&(s=$.getComponentView(n),S(g,s),V(s,e,b),C(g,"mousemove",$.$15k),$.addComponentPropertyChangeListener(n,$.$14k)))},addComponentPropertyChangeListener:function(n,s){n&&n.mp&&n.mp(s)},removeComponentPropertyChangeListener:function(n,s){n&&n.ump&&n.ump(s)},getComponentHZoom:function(n){return n&&n.getZoom?n.getZoom():1},getComponentVZoom:function(n){return n&&n.getZoom?n.getZoom():1},getComponentViewRect:function(n){if(n&&n.getViewRect)return n.getViewRect()},getComponentView:function(n){return n&&n.getView?n.getView():n},invalidateComponent:function(n){n&&n.iv&&n.iv()},validateComponent:function(n){n&&n.validate&&n.validate()},$7k:function(n,s,$,p,g,m,L,G,S,e,b,u){var C,o,F,P,_;s.visible?(_=this._defaultRulerConfig,C=s[C="borderStyle"]||_[C],o=s[o="borderColor"]||_[o],F=s[F="borderWidth"]||_[F],P=(s.size!=bs?s:_).size,_=s[s="background"]||_[s],s=this.$6k(F,C,o,n,$,g,P+F,L,G,S,e,b,u),V(n,g,"0px"),m?I.setCanvas(n,p-s,P):I.setCanvas(n,P,p-s),V(n,"background",_),V(n,Z,"block")):(V(n,Z,"none"),V(this.getComponentView(this._component),g,"0px"))},$6k:function(n,s,$,p,g,m,L,G,S,e,b,u,C){var o=0;return V(p,g,n+"px "+s+" "+$),V(this.getComponentView(this._component),m,L+F),G?(V(p,S,e+F),o+=e):V(p,S,"0px"),b?(V(p,u,C+F),o+=C):V(p,u,"0px"),o},validateImpl:function(){var n,s,$,p=this,g=p._component,m=p.$1k,L=p.$2k,G=p.$3k,S=p.$4k,e=p._view,b=p._defaultRulerConfig,u=p._topRulerConfig,C=p._rightRulerConfig,o=p._bottomRulerConfig,F=p._leftRulerConfig,b=b.size;e&&g&&(n=u.size!=bs?u.size:b,s=C.size!=bs?C.size:b,$=o.size!=bs?o.size:b,b=F.size!=bs?F.size:b,p.$7k(m,u,"border-bottom",e.offsetWidth,A,!0,F.visible,P,b,C.visible,_,s),p.$7k(L,C,"border-left",e.offsetHeight,_,!1,u.visible,A,n,o.visible,y,$),p.$7k(G,o,"border-top",e.offsetWidth,y,!0,F.visible,P,b,C.visible,_,s),p.$7k(S,F,"border-right",e.offsetHeight,P,!1,u.visible,A,n,o.visible,y,$),p.$13k?delete p.$13k:p.invalidateComponent(g),p.validateComponent(g),p.$5k())},$5k:function(){var l=this,n=l.$1k,s=l.$2k,$=l.$3k,p=l.$4k,g=l._topRulerConfig,m=l._rightRulerConfig,L=l._bottomRulerConfig,G=l._leftRulerConfig,S=l._defaultRulerConfig,e=l._component,b=l.getComponentViewRect(e),Y=l.getComponentHZoom(e),r=l.getComponentVZoom(e),I=b.x*Y,c=I+b.width*Y,D=b.y*r,N=D+b.height*r,z=l._defaultRulerConfig.size,a="defaultMajorTickSpacing",k="maxPhysicalMajorTickSpacing",t="minPhysicalMajorTickSpacing",T="tickSpacingAdaptable",f="majorTickTextFont",B="majorTickTextColor",X="majorTickColor",R="minorTickColor",h="guideVisible",v="guideTipVisible",d="guideTipBorderColor",w="guideTipTextColor",Q="guideTipTextFont",q="guideTipBackground",H="guideColor",O="guideWidth",W="minMajorTickSpacing",J=S[a],i=S[k],E=S[t],M=S[T],K=S[f],x=S[B],U=S[X],ns=S[W],ss=S[R],$s=S[h],ps=S[v],gs=S[d],ms=S[w],Ls=S[Q],Gs=S[q],Ss=S[H],es=S[O];function u(n,s,$,p,g,m){var L,G,S,e,b,u,C,o,F,P,_,V,A,y,Z,j;s.visible&&(n=n.getContext("2d"),L=s[a]||J,j=s[T]!=bs?s[T]:M,G=s[f]||K,S=s[B]||x,e=s.size!=bs?s.size:z,b=s[X]||U,u=s[W]||ns,C=s[R]||ss,o=s[h]!=bs?s[h]:$s,F=s[v]!=bs?s[v]:ps,P=s[d]!=bs?s[d]:gs,_=s[w]!=bs?s[w]:ms,V=s[Q]!=bs?s[Q]:Ls,A=s[q]!=bs?s[q]:Gs,y=s[H]||Ss,Z=s[O]||es,j&&(L=l[m]=l.$8k(l[m]||L,s[k]||i,s[t]||E,p?Y:r,u)),$.call(l,n,I,D,c,N,e,p?Y:r,L,G,S,g,b,C),j=l.$16k,(o||F)&&j&&(p?l.$9k(n,j.x,e,y,Z,o,F,P,_,V,A):l.$10k(n,j.y,e,y,Z,o,F,P,_,V,A,g)))}l._view&&e&&(u(n,g,l.$11k,!0,!1,"_currentTopMajorTickSpacing"),u(s,m,l.$12k,!1,!0,"_currentRightMajorTickSpacing"),u($,L,l.$11k,!0,!0,"_currentBottomMajorTickSpacing"),u(p,G,l.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(n,s,$,p,g){return n*p<$?n=c(s/p/g)*g:s<n*p&&(n=L($/p/g)*g),n},getHTipText:function(n){var s=this._component,$=0,p=this._view.getBoundingClientRect();return s.lp?$=N(s.lp({x:n.x+p.left,y:n.y}).x):$-=N(this.getComponentView(s).style.left)||0,$},$9k:function(n,s,$,p,g,m,L,G,S,e,b){var u=this._component,u=(n.save(),I.translateAndScale(n,0,0,1),s-(N(this.getComponentView(u).style.left)||0));s=this.getHTipText(this.$16k),m&&(n.beginPath(),n.fillStyle=p,n.rect(u,0,g,$),n.fill()),L&&(n.beginPath(),n.textAlign="center",n.textBaseline="middle",n.font=e,m=n.measureText(s).width+6,n.fillStyle=b,n.rect(u-m/2,0,m,$),n.fill(),n.strokeStyle=G,n.stroke(),n.beginPath(),n.fillStyle=S,n.fillText(s,u,0+$/2)),n.restore()},getVTipText:function(n){var s=this._component,$=0,p=this._view.getBoundingClientRect();return s.lp?$=N(s.lp({x:n.x,y:n.y+p.top}).y):$-=N(this.getComponentView(s).style.top)||0,$},formatScaleText:function(n){return Math.round(n)},$10k:function(n,s,$,p,g,m,L,G,S,e,b,u){var C=this._component,o=(n.save(),I.translateAndScale(n,0,0,1),$/2),C=s-(N(this.getComponentView(C).style.top)||0);s=this.getVTipText(this.$16k),m&&(n.beginPath(),n.fillStyle=p,n.rect(o-$/2,C,$,g),n.fill()),L&&(n.translate(o,C),n.rotate((u?90:-90)*D/180),n.translate(-o,-C),n.beginPath(),n.textAlign="center",n.textBaseline="middle",n.font=e,m=n.measureText(s).width+6,n.fillStyle=b,n.rect(o-m/2,C-$/2,m,$),n.fill(),n.strokeStyle=G,n.stroke(),n.fillStyle=S,n.fillText(s,o,C)),n.restore()},$11k:function(n,s,$,p,g,m,L,G,S,e,b,u,C){n.save();for(var o=s,F=(o+p)/2,P=(p=p-o,I.translateAndScale(n,s=0,0,1),0),_=0,V=N(m/2),A=m-V,y=b?0:V,Z=G*L,j=Z/10,V=(n.clearRect(s-=Z,0,(p+=Z)-s,m),n.beginPath(),n.fillStyle=C,c(F/j)*j-o),P=V;P<p;P+=j)n.rect(P,0+y,1,A);for(P=V;s<P;P-=j)n.rect(P,0+y,1,A);for(n.fill(),y=b?0:1,n.beginPath(),n.fillStyle=u,P=V=c(F/Z)*Z-o;P<p;P+=Z)n.rect(P,0+y,1,m-1);for(P=V;s<P;P-=Z)n.rect(P,0+y,1,m-1);n.fill();C=(N(/\d+px/.exec(S)[0])||10)/2,n.textBaseline="middle",y=b?m-C-2:2+C,n.beginPath(),n.fillStyle=e,n.font=S,u=c(F/Z)*Z/L;for(P=V,_=u;P<p;P+=Z,_+=G){var l=this.getHScaleText?this.getHScaleText(P):_;n.fillText(this.formatScaleText(l),P+2,0+y)}for(P=V,_=u;s<P;P-=Z,_-=G){l=this.getHScaleText?this.getHScaleText(P):_;n.fillText(this.formatScaleText(l),P+2,0+y)}n.restore()},$12k:function(L,n,s,$,p,g,m,G,S,e,b,u,C){L.save();for(var o=s,F=(o+p)/2,P=(p=p-o,I.translateAndScale(L,s=0,0,1),0),_=this,V=0,A=N(g/2),y=g-A,Z=b?0:A,j=G*m,l=j/10,A=(L.clearRect(0,0,g,(p+=j)-(s-=j)),L.beginPath(),L.fillStyle=C,c(F/l)*l-o),P=A;P<p;P+=l)L.rect(0+Z,P,y,1);for(P=A;s<P;P-=l)L.rect(0+Z,P,y,1);for(L.fill(),Z=b?0:1,L.beginPath(),L.fillStyle=u,P=A=c(F/j)*j-o;P<p;P+=j)L.rect(0+Z,P,g-1,1);for(P=A;s<P;P-=j)L.rect(0+Z,P,g-1,1);L.fill();var C=(N(/\d+px/.exec(S)[0])||10)/2,Y=90*D/180;function r(n,s,$,p,g,m){g=_.getVScaleText?_.getVScaleText($):g,g=_.formatScaleText(g),L.translate(n+s,$),L.rotate(-p),L.translate(-n-s,-$),L.fillText(g,n+s+(m?2:1),$),L.translate(n+s,$),L.rotate(p),L.translate(-n-s,-$)}L.textBaseline="middle",Z=b?g-C:2+C,Y=b?-Y:Y,L.beginPath(),L.fillStyle=e,L.font=S;u=c(F/j)*j/m;for(P=A,V=u;P<p;P+=j,V+=G)r(0,Z,P,Y,V,b);for(P=A,V=u;s<P;P-=j,V-=G)r(0,Z,P,Y,V,b);L.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var n=this,s=n._component,$=n._view;s&&n.removeComponentPropertyChangeListener(s,n.$14k),$&&(o($,"mousemove",n.$15k),m($.parentNode,$),n._view=null)}},g.def(ht.widget[n],s,p)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);