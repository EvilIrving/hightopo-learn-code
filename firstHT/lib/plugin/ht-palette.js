!function(J,f){"use strict";function B(){return document}function U(){return q("div")}function v(){return q("canvas")}function x(){return document.body}function X(J,f,B){J.style.setProperty(f,B,y)}function c(J,f){J.appendChild(f)}function R(J,f){J.removeChild(f)}function N(J){this.$22h=J,this.addListeners()}var I="px",d="innerHTML",Q="className",L=ht.Default,W=ht.Color,i=ht.Node,V="top",e=L.animate,h=L.getInternal(),F="0",A="none",E="max-height",H="font",Z="background",O="border-box",z="user-select",D="box-sizing",k="overflow",a=L.isTouchable,_=L.isTouchEvent,h=L.getInternal(),Y=W.titleIconBackground,S=L.scrollBarInteractiveSize,r=/msie 9/.test(J.navigator?J.navigator.userAgent.toLowerCase():""),y=null,q=function(J){return B().createElement(J)},o=h.addEventListener,J=(h.removeEventListener,h.addMethod(L,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:Y,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:Y}]},paletteTitleLabelColor:L.labelSelectColor,paletteTitleLabelFont:L.labelFont,paletteContentLabelFont:L.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:L.widgetTitleHeight,paletteTitleBackground:W.titleBackground,paletteTitleHoverBackground:W.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:void 0,paletteItemHoverBorderColor:W.highlight,paletteItemSelectBackground:W.highlight},!0),".palette-item:hover{border: 1px solid "+L.paletteItemHoverBorderColor+" !important} .palette-header:hover{background: "+L.paletteTitleHoverBackground+" !important}"),Y=document.createElement("style");a||(Y.styleSheet?Y.styleSheet.cssText=J:Y.appendChild(B().createTextNode(J))),B().getElementsByTagName("head")[0].appendChild(Y);L.def(N,f,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var J=this;J.$36h&&x().removeChild(J.$36h),J.$23h=J.$24h=J.$25h=J.$35h=J.$36h=y},handle_touchstart:function(J){for(var f,B,W=this,N=W.$22h,x=J.target,z=N.sm(),a=N.dm(),Y="palette-header",_="palette-item",S=!1,U=!1,v=!1;x&&(x[Q]||"").indexOf(Y)<0&&(x[Q]||"").indexOf(_)<0;)x=x.parentNode;x&&0<=x[Q].indexOf("palette-header-tool")?S=!0:x&&0<=x[Q].indexOf(Y)?v=!0:x&&0<=x[Q].indexOf(_)&&(U=!0),L.isLeftButton(J)?W.$27h(J)?(W.$24h=L.getClientPoint(J),W.$25h=N.ty()):S?(L.preventDefault(J),f=x.parentNode.$11h,(S=(B=a.getDataById(f)).s("tools")[x.toolIndex]).action&&S.action.call(N)):v?(L.preventDefault(J),f=x.$11h,(B=a.getDataById(f)).isExpanded()?B.setExpanded(!1):B.setExpanded(!0)):U?(f=x.$11h,S=a.getDataById(f),z.ss(S),N.handleDragAndDrop&&(L.preventDefault(J),S.s("draggable")&&(N.handleDragAndDrop(J,"prepare"),W.$35h=0)),S.s("draggable")||(L.preventDefault(J),W.$24h=L.getClientPoint(J),W.$25h=N.ty())):(L.preventDefault(J),W.$24h=L.getClientPoint(J),W.$25h=N.ty()):W.$26h(J)},handle_mousedown:function(J){this.handle_touchstart(J)},handle_mousewheel:function(J){this.handleScroll(J,J.wheelDelta/40,J.wheelDelta!==J.wheelDeltaX)},handle_DOMMouseScroll:function(J){this.handleScroll(J,-J.detail,1)},handleScroll:function(J,f,B){var W=this.$22h;L.preventDefault(J),B&&W._41o()&&W.ty(W.ty()+20*f)},handle_mouseup:function(J){this.handle_touchend(J)},handle_touchend:function(J){this.$37h(J),this.$26h(J)},handleWindowMouseUp:function(J){this.handleWindowTouchEnd(J)},handleWindowTouchEnd:function(J){this.$37h(J),this.$26h(J)},$37h:function(J){var f=this.$22h;2===this.$35h&&(this.$35h=3,f.handleDragAndDrop(J,"end"))},handleWindowMouseMove:function(J){this.handleWindowTouchMove(J)},handleWindowTouchMove:function(J){var f=this,B=f.$22h,W=f.$23h,N=f.$24h,x=f.$25h,z=L.getClientPoint(J),a=B._29I,Y=f.$36h;1===f.$35h||2===f.$35h?(f.$35h=2,B.handleDragAndDrop(J,"between"),_(J)&&(J=J.touches[0]||J.changedTouches[0]),Y.style.left=J.pageX-parseInt(Y.width)/2+I,Y.style.top=J.pageY-parseInt(Y.height)/2+I):"p"===W?B.ty(x+z.y-N.y):"v"===W&&B.ty(x+(N.y-z.y)/a.height*B._59I)},handle_mousemove:function(J){this.handle_touchmove(J)},handle_touchmove:function(J){var f,B,W,N;!L.isDragging()&&L.isLeftButton(J)&&(W=(B=this).$22h,f=B.$27h(J),B.$24h?B.$23h||L.getDistance(L.getClientPoint(J),B.$24h)<2||(B.$23h=f?"v":"p",L.startDragging(B,J)):f?W._43o():0===B.$35h&&(B.$35h=1,W.handleDragAndDrop(J,"begin"),L.startDragging(B,J),_(J)&&(J=J.touches[0]||J.changedTouches[0]),f=B.$36h=new Image,B=W.$10h[W.sm().ld().getId()].querySelector(".image-box"),W=parseInt(B.style.width),N=parseInt(B.style.height),f.draggable=!1,f.src=B.toDataURL(),f.width=W,f.height=N,f.style.position="absolute",f.style.left=J.pageX-W/2+I,f.style.top=J.pageY-N/2+I,x().appendChild(f)))},$27h:function(J){var f=this.$22h,B=f.getView(),W=B.getBoundingClientRect(),N=f._29I,J=J.clientX-W.left+B.scrollLeft;return f._41o()&&N.x+N.width-J<S}}),ht.widget.Palette=function(J){var f,B=this,W=B._view=h.createView(null,B);B.$9h={},B.$10h={},B.$4h={},B._29I={x:0,y:0,width:0,height:0},B._59I=0,B.dm(J||new ht.DataModel),W[Q]="ht-widget-palette",B.$29h=new N(B),X(W,Z,L.paletteContentBackground),X(W,k,"auto"),X(W,D,O),X(W,"-moz-"+D,O),X(W,"-webkit-"+z,A),X(W,"-moz-"+z,A),X(W,"-ms-"+z,A),X(W,z,A),X(W,"position","absolute"),X(W,"overflow","hidden"),c(W,B._79O=(J=U(),(f=J.style).msTouchAction=A,f.cursor="default",a&&f.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",y),f.position="absolute",f.left=F,f.top=F,J)),o(W,"dragstart",function(J){J.dataTransfer&&(J.dataTransfer.setData("Text","nodeid:"+J.target.$11h),J.dataTransfer.effectAllowed="all",B.$29h.$26h())})},W="Palette",J={ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:L.autoHideScrollBar,_scrollBarSize:L.scrollBarSize,_scrollBarColor:L.scrollBarColor,getViewRect:function(){return this._29I},ty:function(J){if(J==y)return this.getTranslateY();this.setTranslateY(J)},setTranslateY:function(J){var f;this.$32h==y&&(J=this.$33h(J),f=this.$30h,this.$30h=J,this.fp("translateY",f,J))},getTranslateY:function(){return this.$30h},setLayout:function(J){var f,B,W=this,N=W._layout;"smallicons"===(W._layout=J)?f=B=20:"iconsonly"===J?f=B=50:(f=70,B=50),W.setItemImageWidth(f),W.setItemImageHeight(B),W.setItemImagePadding(4),W.fp("layout",N,J)},getDataAt:function(J){for(var f=J.target;f&&f.$11h==y;)f=f.parentNode;if(f&&f.$11h!=y)return this.getDataModel().getDataById(f.$11h)},$20h:function(){var J=16;return a&&(J*=1.2),J},$19h:function(){return L.paletteTitleHeight},$18h:function(){var J=L.paletteSeparatorWidth,f=L.paletteTitleBackground,f=L.paletteSeparatorColor||L.brighter(f);return J+I+" solid "+f},$17h:function(J){X(J,"cursor","pointer"),X(J,"display","inline-block"),X(J,"margin-right",(a?8:4)+I),X(J,"vertical-align",V)},$1h:function(J){var f=this,B=U(),W=U(),N=q("span"),x=(B[Q]="palette-header",X(B,"position","relative"),X(B,Z,L.paletteTitleBackground),X(B,"color",L.paletteTitleLabelColor),X(B,V,F),X(B,D,O),X(B,"-moz-"+D,O),X(B,"padding","0 5px 0 0"),X(B,"border-top",f.$18h()),X(B,"width","100%"),X(B,"cursor","pointer"),X(B,"white-space","nowrap"),X(B,k,"hidden"),X(B,H,L.paletteTitleLabelFont),X(B,"line-height",f.$19h()+I),B.$11h=J.getId(),v()),z=f.$19h(),a=f.$20h(),Y=(f.$17h(x),h.setCanvas(x,a,z),c(B,x),J.s("tools"));if(Y)for(var _=0;_<Y.length;_++){var S=v();f.$17h(S),h.setCanvas(S,a,z),S[Q]="palette-header-tool palette-header-tool"+J.getId()+"-"+_,S.style.position="absolute",S.style.right=(a+10)*_+"px",S.toolIndex=_,c(B,S)}return x[Q]="palette-toggle-icon-"+J.getId(),W[Q]="palette-content",X(W,"max-height",0+I),X(W,H,L.paletteContentLabelFont),X(W,k,"hidden"),W.$11h=J.getId(),f.$9h[J.getId()]=W,N[d]=J.getName(),X(N,H,L.paletteTitleLabelFont),c(B,x),c(B,N),[B,W]},$2h:function(J){var f=this,B=f._layout,W=r&&J.s("draggable")?q("a"):U(),N=v(),x=U(),z=J.getName()||"",a=J.s("title")||J.getToolTip()||z,Y=f._itemMargin,_=(N[Q]="image-box",f.getItemImageWidth()),S=f.getItemImageHeight();return h.setCanvas(N,_,S),c(W,N),x[d]=z,x[Q]="label-box","iconsonly"!==B&&c(W,x),W[Q]="palette-item",X(W,"vertical-align",V),X(W,"cursor","pointer"),X(W,"border-radius",5+I),X(W,"border","1px solid transparent"),X(W,"text-align","center"),X(W,"display","inline-block"),X(W,"margin-left",Y+I),X(W,"margin-top",Y+I),X(W,"color",L.paletteContentLabelColor),"smallicons"===B?(X(N,"vertical-align","middle"),X(W,"margin-left",2+I),X(W,"margin-top",2+I),X(W,"padding",2+I),X(W,"text-align","left"),X(x,"display","inline-block"),X(x,"min-width",f.$21h+f._itemMargin+I)):"largeicons"===B&&(X(x,"max-width",_+I),X(x,"overflow","hidden")),W.$11h=J.getId(),a&&(W.title=a),J.s("draggable")&&!f.handleDragAndDrop&&(r?(W.href="#",X(W,"text-decoration",A)):W.draggable="true"),W},$16h:function(J,f,B,W){J=h.initContext(J),h.translateAndScale(J,0,0,1),J.clearRect(0,0,B,B),B=(B-W)/2;L.drawStretchImage(J,L.getImage(f),"fill",0,B,W,W),J.restore()},$15h:function(J){var f,B,W=J.getId(),W=this._view.querySelector(".palette-toggle-icon-"+W),J=J.isExpanded()?L.paletteCollapseIcon:L.paletteExpandIcon;W&&J&&(f=this.$19h(),B=this.$20h(),this.$16h(W,J,f,B))},_drawToolsIcon:function(J){var f=J.s("tools");if(f)for(var B=0;B<f.length;B++){var W=this._view.querySelector(".palette-header-tool"+J.getId()+"-"+B),N=f[B].icon,x=this.$19h(),z=this.$20h();this.$16h(W,N,x,z)}},$14h:function(J){var f,B,W,N=this,x=J.getId(),x=N.$10h[x].querySelector(".image-box"),z=J.getImage(),a=J.s("image.stretch");x&&z&&(x=h.initContext(x),f=N.getItemImagePadding(),f="smallicons"===N._layout?f/2:f,B=N.getItemImageWidth()-2*f,W=N.getItemImageHeight()-2*f,h.translateAndScale(x,0,0,1),x.clearRect(0,0,B,W),L.drawStretchImage(x,L.getImage(z),a,f,f,B,W,J,N,N.getBodyColor(J)),x.restore())},validateImpl:function(){var B=this,J=B.$9h,f=B._layout,W=B.$10h,N=B.$4h,x=B._view,z=B.dm();if(B.$13h&&(delete B.$13h,N={},z.each(function(J){N[J.getId()]=J})),"smallicons"===f)for(var a in N){var Y=N[a];Y instanceof i&&(Y=Y.getName()||"",Y=L.getTextSize(L.paletteContentLabelFont,Y).width,B.$21h!=y&&B.$21h>Y||(B.$21h=Y))}for(a in N){var _,S,U,v,X,Q,V,h,A,H=N[a];z.contains(H)?H instanceof ht.Group?(U=B.$1h(H),(X=W[H.getId()])&&(_=X.nextSibling,R(x,_),R(x,X)),X=z.getSiblings(H).indexOf(H),(S=x.children[2*X]||B._79O)&&S.parentNode?(x.insertBefore(U[0],S),x.insertBefore(_||U[1],S)):(x.appendChild(U[0]),x.appendChild(_||U[1])),W[H.getId()]=U[0],v=J[H.getId()]=_||U[1],S=H.$12h,U=H.s("promptText"),S||(H.$12h=q("div"),H.$12h[d]=U||"",S=H.$12h),0===H.getChildren().size()?v.contains(S)||c(v,S):v.contains(S)&&R(v,S)):(Q=H.getParent())&&(U=B.$2h(H),V=W[H.getId()],v=J[Q.getId()],V&&R(V.parentNode,V),X=z.getSiblings(H).indexOf(H),(V=v.children[X])?v.insertBefore(U,V):c(v,U),W[H.getId()]=U,B.$14h(H)):(h=(V=W[H.getId()]).parentNode,H instanceof ht.Group?(A=V.nextSibling,R(x,V),R(x,A),delete J[H.getId()]):(R(h,V),0===h.children.length&&(Q=z.getDataById(h.$11h))&&(S=Q.$12h)&&!h.contains(S)&&c(h,S)),delete W[H.getId()])}B.$4h={};function Z(){var J=B._59I,f=0;B.$32h!=y&&(clearInterval(B.$32h),f=0,delete B.$32h),B.$32h=setInterval(function(){B.$31h(),J===B._59I?2<=++f&&(clearInterval(B.$32h),delete B.$32h):(f=0,J=B._59I)},30)}var O,D;for(O in J)v=J[O],H=z.getDataById(J[O].$11h),B.$15h(H),B._drawToolsIcon(H),H.isExpanded()?(v.style.maxHeight===0+I?(D=v.scrollHeight+B._itemMargin+I,e(v).duration(200).set(E,D).set("padding-bottom",B._itemMargin+I).end(function(){Z()})):v.style.maxHeight=v.scrollHeight+I,v.style.paddingBottom=B._itemMargin+I):v.style.maxHeight!==0+I&&e(v).duration(200).set(E,F).set("padding-bottom",F).end(function(){Z()});B.$28h(),B.$31h()},$31h:function(){for(var J=this,f=J._view,B=0,W=f.children,N=0;N<W.length;N++){var x=W[N];x.className&&0<=x.className.indexOf("palette-")&&(B+=x.offsetHeight)}J._59I=B,J.$30h=J.$33h(J.ty());var z=J.ty();f.scrollTop=-z,J._29I={x:0,y:-z,width:f.clientWidth,height:f.clientHeight},X(J._79O,V,-z+I),J._93I()},$33h:function(J){var f=this._29I.height-this._59I;return 0<(J=J<f?f:J)?0:Math.round(J)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(J){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(J.property)<0&&this.redraw(),"translateY"===J.property&&(this.iv(),this._43o())},findDataByName:function(J){for(var f=this.dm().getDatas(),B=0;B<f.size();B++){var W=f.get(B);if(W.getName()===J)return W}},setDataModel:function(J){var f=this,B=f._dataModel,W=f._selectionModel;B!==J&&(B&&(B.umm(f.$6h,f),B.umd(f.$8h,f),B.umh(f.$7h,f),W||B.sm().ums(f.$28h,f)),(f._dataModel=J).mm(f.$6h,f),J.md(f.$8h,f),J.mh(f.$7h,f),W?W._21I(J):J.sm().ms(f.$28h,f),f.sm().setSelectionMode("single"),f.fp("dataModel",B,J))},$6h:function(J){var f=this,B=f._view,W=J.data,N=f.$4h;"add"===J.kind||"remove"===J.kind?N[W.getId()]=W:"clear"===J.kind&&(f.$10h={},f.$9h={},f.$4h={},B[d]=""),f.iv()},$7h:function(J){J=J.data;this.$4h[J.getId()]=J,this.iv()},$8h:function(J){var f=J.data;"expanded"!==J.property&&(this.$4h[f.getId()]=f),this.iv()},$28h:function(){var f,B=this,J=B.sm(),W=J.ld();this.dm().each(function(J){(f=B.$10h[J.getId()])&&0<=f[Q].indexOf("palette-item")&&(J===W?X(f,Z,L.paletteItemSelectBackground):f.style.removeProperty(Z))})}},L.def(ht.widget[W],f,J)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);